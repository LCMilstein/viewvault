<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self';">
    <meta name="theme-color" content="#5c1a8a">
    <link rel="manifest" href="/static/manifest.json">
    <link rel="icon" type="image/svg+xml" href="/static/icons/favicon.svg">
    <title>ViewVault</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <div class="app-brand" onclick="goHome()" style="cursor: pointer;" title="Go to main watchlist">
                    <img src="/static/icons/viewvault-mark.svg" alt="ViewVault" class="app-icon">
                    <div>
                        <h1>ViewVault</h1>
                        <div class="app-subtitle">Track what you watch</div>
                    </div>
                </div>
                <div class="header-actions">
                    <div class="settings-menu">
                        <button class="settings-btn" id="settingsBtn">â˜°</button>
                        <div class="settings-dropdown" id="settingsDropdown">
                            <div class="menu-section-header">Watchlist Actions</div>
                            <div class="settings-item" data-action="showSortOptions" aria-label="Sort">
                                <span><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M11 18h10v2H11v-2zm-8-1l4-4 4 4H3zm8-5h10v2H11v-2zM3 7h18v2H3V7zm0-6h18v2H3V1z"/></svg></span> Sort
                            </div>
                            <div class="settings-item" data-action="showFilterOptions" aria-label="Filters">
                                <span><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M3 4h18v2l-7 7v6l-4 3v-9L3 6V4z"/></svg></span> Filters
                            </div>
                            <div class="settings-item" data-action="toggleListManagement" aria-label="Lists">
                                <span><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M3 5h14v4H3V5zm0 6h14v4H3v-4zm16 0h2v4h-2v-4zm0-6h2v4h-2V5z"/></svg></span> Lists
                            </div>
                            <div class="menu-section-header">System</div>
                            <div class="settings-item" data-action="importFromJellyfin" aria-label="Import from Jellyfin">
                                <span><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M19 18H6a4 4 0 010-8 5.5 5.5 0 0110.6-1.5A4.5 4.5 0 1119 18zm-7-7v4h3l-4 4-4-4h3v-4h2z"/></svg></span> Import from Jellyfin
                            </div>
                            <div class="settings-item" data-action="showListManagementOverlay" aria-label="Manage Lists">
                                <span><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M4 4h16v2H4V4zm0 4h10v2H4V8zm0 4h16v2H4v-2zm0 4h10v2H4v-2z"/></svg></span> Manage Lists
                            </div>
                            <div class="settings-item admin-only" id="adminConsoleLink" aria-label="Admin Console">
                                <span><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M19.14,12.94a7.07,7.07,0,0,0,.05-1,7.07,7.07,0,0,0-.05-1l2.11-1.65a.5.5,0,0,0,.12-.64l-2-3.46a.5.5,0,0,0-.6-.22l-2.49,1a7.28,7.28,0,0,0-1.73-1l-.38-2.65A.5.5,0,0,0,13,1H11a.5.5,0,0,0-.5.42L10.12,4.07a7.28,7.28,0,0,0-1.73,1l-2.49-1a.5.5,0,0,0-.6.22l-2,3.46a.5.5,0,0,0,.12.64L5.14,10a7.07,7.07,0,0,0-.05,1,7.07,7.07,0,0,0,.05,1L3,13.65a.5.5,0,0,0-.12.64l2,3.46a.5.5,0,0,0,.6.22l2.49-1a7.28,7.28,0,0,0,1.73,1l.38,2.65A.5.5,0,0,0,11,23h2a.5.5,0,0,0,.5-.42l.38-2.65a7.28,7.28,0,0,0,1.73-1l2.49,1a.5.5,0,0,0,.6-.22l2-3.46a.5.5,0,0,0-.12-.64ZM12,15.5A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"/></svg></span> Admin Console
                            </div>
                            <div class="settings-item" data-action="account" aria-label="Account">
                                <span><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 12c2.761 0 5-2.239 5-5s-2.239-5-5-5-5 2.239-5 5 2.239 5 5 5zm0 2c-4.418 0-8 2.239-8 5v3h16v-3c0-2.761-3.582-5-8-5z"/></svg></span> Account
                            </div>
                            <div class="settings-item" data-action="logout" aria-label="Logout">
                                <span><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M10 17v-2h4v-2h-4V9l-5 4 5 4zm4-14h6v18h-6v-2h4V5h-4V3z"/></svg></span> Logout
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="content">
            <!-- Search Section -->
            <div class="search-container">
                <div class="search-box">
                    <div class="search-input-wrapper">
                        <span class="search-icon"></span>
                        <input id="importTypeInput" class="search-input" type="text" placeholder="Search watchlist or find new content..." />
                    </div>
                    <button class="btn btn-primary" id="importTypeSubmitBtn" aria-label="Search">
                        <span class="btn-label">Search</span>
                        <span class="btn-icon" style="display:none">ğŸ”</span>
                    </button>
                </div>
            </div>
            <div id="searchResultsMovies" class="search-results"></div>
            <div id="searchResultsSeries" class="search-results"></div>

            <!-- List Management Section -->
            <div class="list-management-container" id="listManagementContainer" style="display: none;">
                <div class="list-management-row">
                    <div class="list-header-section" onclick="showListManagementOverlay()">
                        <h3>ğŸ“‹ Lists</h3>
                        <div class="list-header-hint">Click to manage</div>
                    </div>
                    <div class="list-chips-section" id="listSelector">
                        <!-- Lists will be populated here -->
                    </div>
                    <div class="list-actions-section">
                        <button class="btn-select-items" id="selectItemsBtn" onclick="toggleBulkSelectionMode()" aria-label="Enter bulk selection mode" aria-pressed="false">
                            <span aria-hidden="true">â˜‘ï¸</span> Select Items
                        </button>
                        <button class="btn btn-secondary" id="createListBtn">+ New List</button>
                    </div>
                </div>
            </div>

            <!-- Watchlist Section - Always Visible -->
            <div style="margin-top: 0;">
                <div id="watchlistContent">
                    <div class="loading">Loading your watchlist...</div>
                </div>
                
                <!-- Smart Omnibox Search Results -->
                <div id="smartOmniboxResults" class="smart-omnibox-results" style="display: none;">
                    <!-- Local and import search results will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Create List Modal -->
    <div id="createListModal" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3>ğŸ“‹ Create New List</h3>
                <p class="modal-subtitle">Organize your watchlist with custom lists</p>
            </div>
            <div class="modal-body">
                <div class="form-layout">
                    <div class="form-left-column">
                        <div class="form-group full-width">
                            <label for="listNameInput">List Name</label>
                            <input type="text" id="listNameInput" placeholder="Enter a memorable name for your list" maxlength="50" required>
                            <div class="input-hint">Choose a name that helps you organize your content</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="listDescriptionInput">Description</label>
                            <textarea id="listDescriptionInput" placeholder="What kind of content will this list contain?" rows="4" maxlength="200"></textarea>
                            <div class="input-hint">Optional: Add context about your list's purpose</div>
                        </div>
                    </div>
                    
                    <div class="form-right-column">
                        <div class="form-group">
                            <label>Choose an Icon</label>
                            <div class="icon-selector-scrollable">
                                <div class="icon-selector">
                                    <!-- Action & Adventure -->
                                    <button type="button" class="icon-option selected" data-icon="ğŸ“‹" onclick="selectIcon('ğŸ“‹')" title="Clipboard">ğŸ“‹</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ¬" onclick="selectIcon('ğŸ¬')" title="Movie">ğŸ¬</button>
                                    <button type="button" class="icon-option" data-icon="ğŸš€" onclick="selectIcon('ğŸš€')" title="Rocket">ğŸš€</button>
                                    <button type="button" class="icon-option" data-icon="âš”ï¸" onclick="selectIcon('âš”ï¸')" title="Swords">âš”ï¸</button>
                                    <button type="button" class="icon-option" data-icon="ğŸï¸" onclick="selectIcon('ğŸï¸')" title="Race Car">ğŸï¸</button>
                                    <button type="button" class="icon-option" data-icon="ğŸª–" onclick="selectIcon('ğŸª–')" title="Military">ğŸª–</button>
                                    <button type="button" class="icon-option" data-icon="ğŸŒ‹" onclick="selectIcon('ğŸŒ‹')" title="Volcano">ğŸŒ‹</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ”ï¸" onclick="selectIcon('ğŸ”ï¸')" title="Mountain">ğŸ”ï¸</button>
                                    
                                    <!-- Comedy -->
                                    <button type="button" class="icon-option" data-icon="ğŸ˜‚" onclick="selectIcon('ğŸ˜‚')" title="Laughing">ğŸ˜‚</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ¤£" onclick="selectIcon('ğŸ¤£')" title="ROFL">ğŸ¤£</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ­" onclick="selectIcon('ğŸ­')" title="Theater">ğŸ­</button>
                                    <button type="button" class="icon-option" data-icon="ğŸª" onclick="selectIcon('ğŸª')" title="Circus">ğŸª</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ¨" onclick="selectIcon('ğŸ¨')" title="Art">ğŸ¨</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ¤" onclick="selectIcon('ğŸ¤')" title="Microphone">ğŸ¤</button>
                                    <button type="button" class="icon-option" data-icon="ğŸµ" onclick="selectIcon('ğŸµ')" title="Music">ğŸµ</button>
                                    
                                    <!-- Horror & Thriller -->
                                    <button type="button" class="icon-option" data-icon="ğŸ‘»" onclick="selectIcon('ğŸ‘»')" title="Ghost">ğŸ‘»</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ¦‡" onclick="selectIcon('ğŸ¦‡')" title="Bat">ğŸ¦‡</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ•·ï¸" onclick="selectIcon('ğŸ•·ï¸')" title="Spider">ğŸ•·ï¸</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ’€" onclick="selectIcon('ğŸ’€')" title="Skull">ğŸ’€</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ©¸" onclick="selectIcon('ğŸ©¸')" title="Blood">ğŸ©¸</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ”ª" onclick="selectIcon('ğŸ”ª')" title="Knife">ğŸ”ª</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ•¯ï¸" onclick="selectIcon('ğŸ•¯ï¸')" title="Candle">ğŸ•¯ï¸</button>
                                    
                                    <!-- Sci-Fi & Fantasy -->
                                    <button type="button" class="icon-option" data-icon="ğŸ‘½" onclick="selectIcon('ğŸ‘½')" title="Alien">ğŸ‘½</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ›¸" onclick="selectIcon('ğŸ›¸')" title="UFO">ğŸ›¸</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ”®" onclick="selectIcon('ğŸ”®')" title="Crystal Ball">ğŸ”®</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ‰" onclick="selectIcon('ğŸ‰')" title="Dragon">ğŸ‰</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ§™â€â™‚ï¸" onclick="selectIcon('ğŸ§™â€â™‚ï¸')" title="Wizard">ğŸ§™â€â™‚ï¸</button>
                                    <button type="button" class="icon-option" data-icon="âš¡" onclick="selectIcon('âš¡')" title="Lightning">âš¡</button>
                                    <button type="button" class="icon-option" data-icon="ğŸŒŸ" onclick="selectIcon('ğŸŒŸ')" title="Star">ğŸŒŸ</button>
                                    
                                    <!-- Romance & Drama -->
                                    <button type="button" class="icon-option" data-icon="ğŸ’•" onclick="selectIcon('ğŸ’•')" title="Hearts">ğŸ’•</button>
                                    <button type="button" class="icon-option" data-icon="ğŸŒ¹" onclick="selectIcon('ğŸŒ¹')" title="Rose">ğŸŒ¹</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ’" onclick="selectIcon('ğŸ’')" title="Ring">ğŸ’</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ­" onclick="selectIcon('ğŸ­')" title="Drama">ğŸ­</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ’”" onclick="selectIcon('ğŸ’”')" title="Broken Heart">ğŸ’”</button>
                                    <button type="button" class="icon-option" data-icon="ğŸŒ™" onclick="selectIcon('ğŸŒ™')" title="Moon">ğŸŒ™</button>
                                    <button type="button" class="icon-option" data-icon="â˜”" onclick="selectIcon('â˜”')" title="Umbrella">â˜”</button>
                                    
                                    <!-- Family & Kids -->
                                    <button type="button" class="icon-option" data-icon="ğŸ‘¶" onclick="selectIcon('ğŸ‘¶')" title="Baby">ğŸ‘¶</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ§¸" onclick="selectIcon('ğŸ§¸')" title="Teddy Bear">ğŸ§¸</button>
                                    <button type="button" class="icon-option" data-icon="ğŸˆ" onclick="selectIcon('ğŸˆ')" title="Balloon">ğŸˆ</button>
                                    <button type="button" class="icon-option" data-icon="ğŸŒˆ" onclick="selectIcon('ğŸŒˆ')" title="Rainbow">ğŸŒˆ</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ¦„" onclick="selectIcon('ğŸ¦„')" title="Unicorn">ğŸ¦„</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ­" onclick="selectIcon('ğŸ­')" title="Lollipop">ğŸ­</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ " onclick="selectIcon('ğŸ ')" title="Carousel">ğŸ </button>
                                    
                                    <!-- Documentary & Educational -->
                                    <button type="button" class="icon-option" data-icon="ğŸ“š" onclick="selectIcon('ğŸ“š')" title="Books">ğŸ“š</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ”¬" onclick="selectIcon('ğŸ”¬')" title="Microscope">ğŸ”¬</button>
                                    <button type="button" class="icon-option" data-icon="ğŸŒ" onclick="selectIcon('ğŸŒ')" title="Earth">ğŸŒ</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ¦•" onclick="selectIcon('ğŸ¦•')" title="Dinosaur">ğŸ¦•</button>
                                    <button type="button" class="icon-option" data-icon="ğŸš" onclick="selectIcon('ğŸš')" title="Helicopter">ğŸš</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ›ï¸" onclick="selectIcon('ğŸ›ï¸')" title="Building">ğŸ›ï¸</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ—¿" onclick="selectIcon('ğŸ—¿')" title="Statue">ğŸ—¿</button>
                                    
                                    <!-- Western & Historical -->
                                    <button type="button" class="icon-option" data-icon="ğŸ¤ " onclick="selectIcon('ğŸ¤ ')" title="Cowboy">ğŸ¤ </button>
                                    <button type="button" class="icon-option" data-icon="ğŸ" onclick="selectIcon('ğŸ')" title="Horse">ğŸ</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ”«" onclick="selectIcon('ğŸ”«')" title="Gun">ğŸ”«</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ°" onclick="selectIcon('ğŸ°')" title="Castle">ğŸ°</button>
                                    <button type="button" class="icon-option" data-icon="âš”ï¸" onclick="selectIcon('âš”ï¸')" title="Sword">âš”ï¸</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ›¡ï¸" onclick="selectIcon('ğŸ›¡ï¸')" title="Shield">ğŸ›¡ï¸</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ‘‘" onclick="selectIcon('ğŸ‘‘')" title="Crown">ğŸ‘‘</button>
                                    
                                    <!-- Sports & Action -->
                                    <button type="button" class="icon-option" data-icon="âš½" onclick="selectIcon('âš½')" title="Soccer">âš½</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ€" onclick="selectIcon('ğŸ€')" title="Basketball">ğŸ€</button>
                                    <button type="button" class="icon-option" data-icon="ğŸˆ" onclick="selectIcon('ğŸˆ')" title="Football">ğŸˆ</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ¾" onclick="selectIcon('ğŸ¾')" title="Tennis">ğŸ¾</button>
                                    <button type="button" class="icon-option" data-icon="ğŸŠâ€â™‚ï¸" onclick="selectIcon('ğŸŠâ€â™‚ï¸')" title="Swimming">ğŸŠâ€â™‚ï¸</button>
                                    <button type="button" class="icon-option" data-icon="ğŸš´â€â™‚ï¸" onclick="selectIcon('ğŸš´â€â™‚ï¸')" title="Cycling">ğŸš´â€â™‚ï¸</button>
                                    <button type="button" class="icon-option" data-icon="ğŸƒâ€â™‚ï¸" onclick="selectIcon('ğŸƒâ€â™‚ï¸')" title="Running">ğŸƒâ€â™‚ï¸</button>
                                    
                                    <!-- Food & Cooking -->
                                    <button type="button" class="icon-option" data-icon="ğŸ•" onclick="selectIcon('ğŸ•')" title="Pizza">ğŸ•</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ”" onclick="selectIcon('ğŸ”')" title="Burger">ğŸ”</button>
                                    <button type="button" class="icon-option" data-icon="ğŸœ" onclick="selectIcon('ğŸœ')" title="Noodles">ğŸœ</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ°" onclick="selectIcon('ğŸ°')" title="Cake">ğŸ°</button>
                                    <button type="button" class="icon-option" data-icon="â˜•" onclick="selectIcon('â˜•')" title="Coffee">â˜•</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ·" onclick="selectIcon('ğŸ·')" title="Wine">ğŸ·</button>
                                    <button type="button" class="icon-option" data-icon="ğŸº" onclick="selectIcon('ğŸº')" title="Beer">ğŸº</button>
                                    
                                    <!-- Travel & Adventure -->
                                    <button type="button" class="icon-option" data-icon="âœˆï¸" onclick="selectIcon('âœˆï¸')" title="Airplane">âœˆï¸</button>
                                    <button type="button" class="icon-option" data-icon="ğŸš¢" onclick="selectIcon('ğŸš¢')" title="Ship">ğŸš¢</button>
                                    <button type="button" class="icon-option" data-icon="ğŸš‚" onclick="selectIcon('ğŸš‚')" title="Train">ğŸš‚</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ–ï¸" onclick="selectIcon('ğŸ–ï¸')" title="Beach">ğŸ–ï¸</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ—½" onclick="selectIcon('ğŸ—½')" title="Statue of Liberty">ğŸ—½</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ—¼" onclick="selectIcon('ğŸ—¼')" title="Tokyo Tower">ğŸ—¼</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ°" onclick="selectIcon('ğŸ°')" title="Castle">ğŸ°</button>
                                    
                                    <!-- Music & Performance -->
                                    <button type="button" class="icon-option" data-icon="ğŸ¸" onclick="selectIcon('ğŸ¸')" title="Guitar">ğŸ¸</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ¹" onclick="selectIcon('ğŸ¹')" title="Piano">ğŸ¹</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ¥" onclick="selectIcon('ğŸ¥')" title="Drum">ğŸ¥</button>
                                    <button type="button" class="icon-option" data-icon="ğŸº" onclick="selectIcon('ğŸº')" title="Trumpet">ğŸº</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ»" onclick="selectIcon('ğŸ»')" title="Violin">ğŸ»</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ¤" onclick="selectIcon('ğŸ¤')" title="Microphone">ğŸ¤</button>
                                    <button type="button" class="icon-option" data-icon="ğŸ§" onclick="selectIcon('ğŸ§')" title="Headphones">ğŸ§</button>
                                    
                                    <!-- Nature & Outdoors -->
                                    <button type="button" class="icon-option" data-icon="ğŸŒ²" onclick="selectIcon('ğŸŒ²')" title="Tree">ğŸŒ²</button>
                                    <button type="button" class="icon-option" data-icon="ğŸŒŠ" onclick="selectIcon('ğŸŒŠ')" title="Wave">ğŸŒŠ</button>
                                    <button type="button" class="icon-option" data-icon="ğŸŒ…" onclick="selectIcon('ğŸŒ…')" title="Sunrise">ğŸŒ…</button>
                                    <button type="button" class="icon-option" data-icon="ğŸŒŒ" onclick="selectIcon('ğŸŒŒ')" title="Galaxy">ğŸŒŒ</button>
                                    <button type="button" class="icon-option" data-icon="ğŸŒ¸" onclick="selectIcon('ğŸŒ¸')" title="Flower">ğŸŒ¸</button>
                                    <button type="button" class="icon-option" data-icon="ğŸƒ" onclick="selectIcon('ğŸƒ')" title="Leaf">ğŸƒ</button>
                                    <button type="button" class="icon-option" data-icon="â„ï¸" onclick="selectIcon('â„ï¸')" title="Snow">â„ï¸</button>
                                </div>
                            </div>
                            <div class="input-hint">Choose an icon that represents your list's theme</div>
                        </div>
                        
                        <div class="form-group">
                            <label>Choose a Color</label>
                            <div class="color-selector">
                                <button type="button" class="color-option selected" data-color="#007AFF" onclick="selectColor('#007AFF')" style="background-color: #007AFF;" title="Blue"></button>
                                <button type="button" class="color-option" data-color="#FF3B30" onclick="selectColor('#FF3B30')" style="background-color: #FF3B30;" title="Red"></button>
                                <button type="button" class="color-option" data-color="#34C759" onclick="selectColor('#34C759')" style="background-color: #34C759;" title="Green"></button>
                                <button type="button" class="color-option" data-color="#FF9500" onclick="selectColor('#FF9500')" style="background-color: #FF9500;" title="Orange"></button>
                                <button type="button" class="color-option" data-color="#AF52DE" onclick="selectColor('#AF52DE')" style="background-color: #AF52DE;" title="Purple"></button>
                                <button type="button" class="color-option" data-color="#FF2D92" onclick="selectColor('#FF2D92')" style="background-color: #FF2D92;" title="Pink"></button>
                                <button type="button" class="color-option" data-color="#5AC8FA" onclick="selectColor('#5AC8FA')" style="background-color: #5AC8FA;" title="Light Blue"></button>
                                <button type="button" class="color-option" data-color="#FFCC02" onclick="selectColor('#FFCC02')" style="background-color: #FFCC02;" title="Yellow"></button>
                            </div>
                            <div class="input-hint">Color for the list chip in the selector</div>
                        </div>
                        
                        <div class="form-group">
                            <label>Choose a Background Color</label>
                            <div class="color-selector">
                                <button type="button" class="bg-color-option selected" data-bg-color="#1a1a2e" onclick="selectBackgroundColor('#1a1a2e', event)" style="background-color: #1a1a2e;" title="Dark Blue"></button>
                                <button type="button" class="bg-color-option" data-bg-color="#2d1b69" onclick="selectBackgroundColor('#2d1b69', event)" style="background-color: #2d1b69;" title="Purple"></button>
                                <button type="button" class="bg-color-option" data-bg-color="#1b4d3e" onclick="selectBackgroundColor('#1b4d3e', event)" style="background-color: #1b4d3e;" title="Dark Green"></button>
                                <button type="button" class="bg-color-option" data-bg-color="#4d1b1b" onclick="selectBackgroundColor('#4d1b1b', event)" style="background-color: #4d1b1b;" title="Dark Red"></button>
                                <button type="button" class="bg-color-option" data-bg-color="#1b3b4d" onclick="selectBackgroundColor('#1b3b4d', event)" style="background-color: #1b3b4d;" title="Dark Blue"></button>
                                <button type="button" class="bg-color-option" data-bg-color="#4d3b1b" onclick="selectBackgroundColor('#4d3b1b', event)" style="background-color: #4d3b1b;" title="Dark Brown"></button>
                                <button type="button" class="bg-color-option" data-bg-color="#3b1b4d" onclick="selectBackgroundColor('#3b1b4d', event)" style="background-color: #3b1b4d;" title="Dark Purple"></button>
                                <button type="button" class="bg-color-option" data-bg-color="#1b4d3b" onclick="selectBackgroundColor('#1b4d3b', event)" style="background-color: #1b4d3b;" title="Dark Teal"></button>
                            </div>
                            <div class="input-hint">Background color when viewing this list (darker colors recommended)</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeCreateListModal()">Cancel</button>
                <button class="btn btn-primary" onclick="createNewList()">Create List</button>
            </div>
        </div>
    </div>

    <!-- List Management Overlay -->
    <div id="listManagementOverlay" class="modal-overlay" style="display: none;">
        <div class="modal list-management-modal">
            <div class="modal-header">
                <h3>ğŸ“‹ Manage Your Lists</h3>
                <p class="modal-subtitle">Organize, edit, and share your watchlists</p>
            </div>
            <div class="modal-body">
                <div class="list-management-tabs">
                    <button class="tab-button active" onclick="switchListTab('all')">All Lists</button>
                    <button class="tab-button" onclick="switchListTab('shared')">Shared</button>
                    <button class="tab-button" onclick="switchListTab('settings')">Settings</button>
                </div>
                
                <div id="allListsTab" class="tab-content active">
                    <div class="lists-grid" id="listsGrid">
                        <!-- Lists will be populated here -->
                    </div>
                </div>
                
                <div id="sharedListsTab" class="tab-content">
                    <div class="shared-lists-info">
                        <p>Lists shared with you will appear here.</p>
                        <p>You can view and interact with shared lists based on permissions.</p>
                    </div>
                </div>
                
                <div id="settingsTab" class="tab-content">
                    <div class="list-settings">
                        <h4>List Management Preferences</h4>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="autoSyncLists" checked>
                                Automatically sync list changes
                            </label>
                        </div>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="showListCounts" checked>
                                Show item counts on list chips
                            </label>
                        </div>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="rememberListSelection" checked>
                                Remember last selected lists
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeListManagementOverlay()">Close</button>
            </div>
        </div>
    </div>

    <!-- Edit List Modal -->
    <div id="editListModal" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3>âœï¸ Edit List</h3>
                <p class="modal-subtitle">Update your list's properties</p>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="editListNameInput">List Name</label>
                    <input type="text" id="editListNameInput" placeholder="Enter list name" maxlength="50" required>
                </div>
                
                <div class="form-group">
                    <label for="editListDescriptionInput">Description</label>
                    <textarea id="editListDescriptionInput" placeholder="Enter list description" rows="3" maxlength="200"></textarea>
                </div>
                
                <div class="form-group">
                    <label>Icon</label>
                    <div class="icon-selector" id="editIconSelector">
                        <!-- Icons will be populated here -->
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Color</label>
                    <div class="color-selector" id="editColorSelector">
                        <!-- Colors will be populated here -->
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeEditListModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveListChanges()">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- List Selector Modal -->
    <div id="listSelectorModal" class="modal-overlay" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="listSelectorTitle">
        <div class="modal list-selector-modal">
            <div class="modal-header">
                <h3 id="listSelectorTitle">ğŸ“‹ Select Target List</h3>
                <p class="modal-subtitle" id="listSelectorSubtitle">Choose where to copy this item</p>
            </div>
            <div class="modal-body">
                <div id="listSelectorContent" role="list" aria-label="Available lists">
                    <!-- Loading state -->
                    <div class="list-selector-loading" role="status" aria-live="polite">
                        <div class="spinner" aria-hidden="true"></div>
                        <p>Loading lists...</p>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeListSelector()" aria-label="Cancel and close list selector">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Duplicate Warning Modal -->
    <div id="duplicateWarningModal" class="modal-overlay" style="display: none;">
        <div class="modal duplicate-warning-modal">
            <div class="modal-header">
                <h3 id="duplicateWarningTitle">âš ï¸ Duplicate Item Detected</h3>
                <p class="modal-subtitle" id="duplicateWarningSubtitle">This item already exists in the target list</p>
            </div>
            <div class="modal-body">
                <div id="duplicateWarningContent" style="padding: 20px; text-align: center;">
                    <p style="color: rgba(255, 255, 255, 0.8); margin-bottom: 20px;">
                        This item is already in the target list. What would you like to do?
                    </p>
                </div>
            </div>
            <div class="modal-buttons" id="duplicateWarningButtons">
                <!-- Buttons will be dynamically added based on operation type -->
            </div>
        </div>
    </div>

    <!-- Bulk Action Bar -->
    <div id="bulkActionBar" class="bulk-action-bar">
        <div class="bulk-selection-info" role="status" aria-live="polite">
            <span class="bulk-selection-count" id="bulkSelectionCount" aria-label="0 items selected">0</span> items selected
        </div>
        <div class="bulk-actions">
            <button class="btn-bulk-action btn-bulk-copy" onclick="bulkCopySelected()" aria-label="Copy selected items to another list">
                <span aria-hidden="true">ğŸ“‹</span> Copy Selected
            </button>
            <button class="btn-bulk-action btn-bulk-move" onclick="bulkMoveSelected()" aria-label="Move selected items to another list">
                <span aria-hidden="true">â¡ï¸</span> Move Selected
            </button>
            <button class="btn-bulk-action btn-bulk-cancel" onclick="exitBulkSelectionMode()" aria-label="Cancel bulk selection mode">
                Cancel
            </button>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html> 