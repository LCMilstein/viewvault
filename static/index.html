<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self';">
    <meta name="theme-color" content="#533483">
    <meta name="description" content="Your Personal Watchlist Manager">
    <link rel="manifest" href="/static/manifest.json">
    <link rel="icon" type="image/svg+xml" href="/static/icons/favicon.svg">
    <title>ViewVault</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 30%, #0f3460 70%, #533483 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(15, 20, 40, 0.95);
            border-radius: 22px;
            box-shadow: 0 8px 48px 0 rgba(83, 52, 131, 0.4), 0 0 32px 0 #00d4aa;
            overflow: hidden;
            border-top: 4px solid #00d4aa;
            position: relative;
        }

        .header {
            background: linear-gradient(135deg, #533483 0%, #00d4aa 100%);
            color: white;
            padding: 16px; /* Reduced from 20px to 16px for mobile */
            text-align: center;
            border-top: 4px solid #00d4aa;
            box-shadow: 0 0 32px 0 #00d4aa;
            position: relative;
            padding-top: 12px; /* tighter */
            padding-bottom: 10px;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .app-brand {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .app-icon {
            width: 36px;
            height: 36px;
            filter: drop-shadow(0 0 8px rgba(255,255,255,0.3));
        }

        .header h1 {
            font-size: 1.6em; /* Reduced from 1.8em to 1.6em */
            margin: 0;
            font-weight: 600;
            letter-spacing: 1px;
        }

        .app-subtitle {
            font-size: 0.7em; /* Reduced from 0.75em to 0.7em */
            color: rgba(255, 255, 255, 0.5);
            font-weight: 400;
            margin-top: 1px;
            letter-spacing: 0.5px;
        }

        .header-actions {
            position: static;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .online-status {
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .online-status.online {
            background: rgba(0, 212, 170, 0.2);
            color: #00d4aa;
            border: 1px solid rgba(0, 212, 170, 0.3);
        }
        
        .online-status.offline {
            background: rgba(255, 107, 107, 0.2);
            color: #ff6b6b;
            border: 1px solid rgba(255, 107, 107, 0.3);
        }
        
        .logout-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .content {
            padding: 20px; /* Reduced from 30px to 20px */
            min-height: 400px; /* Minimum height to prevent UI issues */
        }

        .content h2, .tab-content h2 {
            color: #e0e6ff;
            text-shadow: 0 0 8px #00d4aa, 0 0 2px #fff;
            margin-bottom: 20px; /* Reduced from 28px to 20px */
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        /* New search container styles */
        .search-container {
            margin-bottom: 20px;
        }

        .search-box {
            display: flex;
            align-items: center;
            gap: 12px;
            background: white;
            border-radius: 12px;
            padding: 8px 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 1px solid #e9ecef;
        }

        .search-input-wrapper {
            flex: 1 1 auto;
            width: auto;
            position: relative;
        }

        .search-icon {
            position: absolute;
            left: 12px;
            color: #6c757d;
            font-size: 14px; /* Reduced from 16px to 14px */
            pointer-events: none;
            z-index: 1;
            top: 50%;
            transform: translateY(-50%);
        }

        .search-icon::before {
            content: "üîç";
            font-size: 12px; /* Reduced from 14px to 12px */
        }

        .search-input {
            flex: 1;
            padding: 10px 12px 10px 45px; /* Reduced left padding from 50px to 45px */
            border: none;
            border-radius: 8px;
            font-size: 14px;
            outline: none;
            background: transparent;
            position: relative;
            z-index: 2;
            min-width: 0;
        }

        .search-input:focus {
            outline: none;
        }

        .search-dropdown {
            position: relative;
        }

        .search-dropdown .btn {
            padding: 10px 16px;
            font-size: 14px;
            white-space: nowrap;
        }

        /* Smart Omnibox - No toggle needed */



        /* Watchlist Search */
        .watchlist-search-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }

        .watchlist-search-container .search-input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }

        .watchlist-search-container .search-input {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #333;
            padding: 12px 12px 12px 45px;
            border-radius: 8px;
            font-size: 14px;
            width: 100%;
            transition: all 0.3s ease;
        }

        .watchlist-search-container .search-input:focus {
            background: white;
            border-color: #00d4aa;
            box-shadow: 0 0 0 3px rgba(0, 212, 170, 0.1);
        }

        .watchlist-search-container .search-icon {
            position: absolute;
            left: 15px;
            color: #6c757d;
            font-size: 16px;
            pointer-events: none;
            z-index: 1;
        }

        /* Settings cog menu */
        .settings-menu {
            position: relative;
            display: inline-block;
        }

        .settings-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 18px;
            cursor: pointer;
            padding: 10px 12px;
            border-radius: 8px;
            transition: all 0.2s;
            color: white;
            backdrop-filter: blur(10px);
        }

        .settings-btn:hover {
            background-color: rgba(0,0,0,0.1);
        }

        .settings-dropdown {
            position: absolute;
            right: 0;
            top: 100%;
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            min-width: 220px;
            z-index: 1000;
            display: none;
            padding: 4px 0;
        }



        .settings-item:hover {
            background-color: #f8f9fa;
        }

        .settings-item.separator {
            border-top: 1px solid #e9ecef;
            margin: 4px 0;
            padding: 4px 16px;
        }

        .settings-item.danger {
            color: #dc3545;
        }

        .settings-item.danger:hover {
            background-color: #f8d7da;
        }

        .menu-section-header {
            padding: 8px 16px;
            font-size: 12px;
            font-weight: 600;
            color: #6c757d;
            text-transform: uppercase;
            border-top: 1px solid #e9ecef;
            background-color: #f8f9fa;
            letter-spacing: 0.5px;
        }

        .menu-section-header:first-child {
            border-top: none;
        }

        .settings-item {
            padding: 10px 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: background-color 0.2s;
            color: #333;
            font-weight: 500;
            white-space: nowrap;
        }

        .settings-item span {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
            font-size: 16px;
            flex-shrink: 0;
        }

        /* Hide tabs since we moved functionality to settings menu */
        .tabs {
            display: none !important;
        }

        .tab-content {
            display: block !important;
        }

        .search-section {
            background: #f8f9fa;
            padding: 20px; /* Reduced from 25px to 20px */
            border-radius: 10px;
            margin-bottom: 20px; /* Reduced from 30px to 20px */
        }

        .search-section h2 {
            margin-bottom: 15px; /* Reduced from 20px to 15px */
            color: #333;
        }

        .search-form {
            display: flex;
            gap: 8px; /* Reduced from 10px to 8px */
            width: 100%;
            margin-bottom: 8px; /* Reduced from 10px to 8px */
        }

        .search-input {
            flex: 1;
            padding: 10px 12px 10px 50px; /* Added left padding for search icon */
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px; /* Reduced from 16px to 14px */
            transition: border-color 0.3s;
        }

        .search-input:focus {
            outline: none;
            border-color: #00d4aa;
        }

        .btn {
            padding: 10px 20px; /* Reduced from 12px 25px to 10px 20px */
            border: none;
            border-radius: 8px;
            font-size: 14px; /* Reduced from 16px to 14px */
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(90deg, #533483 0%, #00d4aa 100%);
            color: white;
            box-shadow: 0 0 8px #533483, 0 2px 8px rgba(0,212,170,0.2);
            border: none;
        }

        .btn-primary:hover, .btn-primary:focus {
            background: linear-gradient(90deg, #4a2d75 0%, #00b894 100%);
            box-shadow: 0 0 16px #00d4aa, 0 2px 16px rgba(0,212,170,0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);
            color: #ffffff;
            border: 2px solid #6c757d;
        }

        .btn-secondary:hover, .btn-secondary:focus {
            background: linear-gradient(135deg, #5a6268 0%, #495057 100%);
            border-color: #6c757d;
            transform: translateY(-2px);
        }

        .expand-arrow {
            background: none !important;
            color: #333 !important;
            box-shadow: none !important;
            border: none !important;
            font-size: 14px; /* Reduced from 16px to 14px */
            padding: 4px 6px; /* Reduced from 5px 8px to 4px 6px */
            cursor: pointer;
            transition: color 0.3s;
        }
        .expand-arrow:hover {
            background: none !important;
            color: #000 !important;
            box-shadow: none !important;
        }
        .new-badge {
            background: #00d4aa;
            color: white;
            padding: 1px 6px; /* Reduced from 2px 8px to 1px 6px */
            border-radius: 10px; /* Reduced from 12px to 10px */
            font-size: 10px; /* Reduced from 12px to 10px */
            font-weight: bold;
            margin-left: 8px; /* Reduced from 10px to 8px */
            display: inline-block;
            box-shadow: 0 2px 4px rgba(0,212,170,0.3);
        }

        .quality-badge {
            display: inline-block;
            padding: 2px 4px; /* Reduced horizontal padding for narrower badges */
            border-radius: 3px;
            font-weight: bold;
            margin-right: 6px;
            text-align: center;
            min-width: 16px; /* Reduced from 20px */
            box-shadow: 0 1px 2px rgba(0,0,0,0.2);
            border: 1px solid rgba(0,0,0,0.1);
            transition: all 0.2s ease;
        }

        .quality-badge.quality-sd {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            color: #ffffff;
        }

        .quality-badge.quality-hd {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #000000;
        }

        .quality-badge.quality-4k {
            background: linear-gradient(135deg, #C0C0C0 0%, #A0A0A0 100%);
            color: #000000;
        }

        .quality-badge:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.4);
        }

        .quality-badge .quality-label {
            font-size: 10px;
            font-weight: bold;
            line-height: 1;
            text-transform: uppercase;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .button-group .btn {
            flex: 1;
            font-size: 14px;
            padding: 10px 15px;
        }

        /* Old modal styles removed - using new modal system */

        .episodes-modal {
            background: white;
            border-radius: 15px;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .episodes-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 20px;
        }

        .episodes-header h2 {
            margin: 0;
            color: #333;
        }

        .season-section {
            margin-bottom: 30px;
        }

        .season-section h3 {
            color: #00d4aa;
            margin-bottom: 15px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .episode-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .episode-item:hover {
            background: #f8f9fa;
        }

        .episode-item.watched {
            background: #e8f5e8;
            border-color: #28a745;
        }

        .episode-info {
            flex: 1;
        }

        .episode-info small {
            color: #6c757d;
        }

        .search-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(128px, 1fr));
            gap: 8px;
            margin-top: 20px;
        }

        .result-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .result-card h3 {
            margin-bottom: 10px;
            color: #333;
        }

        .result-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .tabs {
            display: flex;
            border-bottom: 2px solid #e9ecef;
            margin-bottom: 30px;
        }

        .tab {
            padding: 15px 30px;
            background: none;
            border: none;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            color: #6c757d;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab.active {
            color: #00d4aa;
            border-bottom-color: #00d4aa;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .watchlist-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .watchlist-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #00d4aa;
        }

        .watchlist-item.watched {
            border-left-color: #28a745;
            opacity: 0.7;
        }

        .watchlist-item h3 {
            margin-bottom: 10px;
            color: #333;
        }

        .watchlist-item .meta {
            color: #6c757d;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #533483 0%, #00d4aa 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-card h3 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .stat-card p {
            opacity: 0.9;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #6c757d;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .success {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        /* Checklist style for watchlist */
        .watchlist-list {
            width: 100%;
            max-width: 100%;
            margin: 0;
            border-radius: 0;
            background: transparent;
            box-shadow: none;
            padding: 0;
            min-height: 200px; /* Minimum height to prevent UI issues */
        }
        .watchlist-row, .episode-row {
            display: flex;
            align-items: center;
            border-bottom: 1px solid #e9ecef;
            padding: 6px 12px; /* Reduced from 8px to 6px */
            font-size: 14px; /* Reduced from 16px to 14px */
            background: white;
            box-shadow: 0 1px 8px #232046 inset;
        }
        .watchlist-row:last-child, .episode-row:last-child {
            border-bottom: none;
        }
        .watchlist-row .title, .episode-row .title {
            flex: 1;
            margin-right: 10px;
            font-weight: 500;
        }
        .watchlist-row .meta, .episode-row .meta {
            color: #6c757d;
            font-size: 12px; /* Reduced from 13px to 12px */
            margin-right: 10px;
        }
        .watchlist-row .btn, .episode-row .btn {
            font-size: 12px; /* Reduced from 13px to 12px */
            padding: 4px 10px; /* Reduced from 5px 12px */
        }
        .series-group {
            background: #eef2fa;
            border-radius: 6px;
            margin: 6px 0; /* Reduced from 10px to 6px */
            padding: 0;
        }
        .series-header {
            display: flex;
            align-items: center;
            padding: 6px 12px; /* Reduced from 8px to 6px */
            font-weight: 600;
            background: #dde6f7;
            border-radius: 6px 6px 0 0;
            cursor: pointer;
        }
        .series-header .meta {
            margin-left: 10px;
            color: #667eea;
            font-size: 12px; /* Reduced from 13px to 12px */
        }
        .series-episodes {
            padding: 0;
            margin-left: 20px; /* Add indentation for episodes */
            border-left: 2px solid #e9ecef; /* Add visual separator */
        }
        .checkbox {
            width: 16px; /* Reduced from 18px to 16px */
            height: 16px; /* Reduced from 18px to 16px */
            margin-right: 10px; /* Reduced from 12px to 10px */
        }
        .watched-row {
            opacity: 0.5;
            text-decoration: line-through;
        }
        .search-result-card {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 6px;
            transition: transform 0.3s, box-shadow 0.3s;
            backdrop-filter: blur(10px);
            cursor: pointer;
            width: 128px;
            height: 196px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .search-result-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 212, 170, 0.3);
            border-color: #00d4aa;
        }

        .search-result-info {
            text-align: center;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .search-result-title {
            color: #ffffff !important;
            font-weight: 600;
            font-size: 12px;
            margin-bottom: 4px;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
            line-height: 1.2;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .search-result-meta {
            color: #b8c5d6 !important;
            font-size: 10px;
            margin-bottom: 6px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }

        .import-btn {
            background: linear-gradient(135deg, #00d4aa 0%, #0099cc 100%);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 4px 8px;
            font-size: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: auto;
        }

        .import-btn:hover {
            background: linear-gradient(135deg, #00b894 0%, #0077aa 100%);
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 212, 170, 0.3);
        }

        .import-movie-btn {
            background: linear-gradient(135deg, #00d4aa 0%, #0099cc 100%);
        }

        .import-series-btn {
            background: linear-gradient(135deg, #b388ff 0%, #7f7fd5 100%);
        }

        .import-series-btn:hover {
            background: linear-gradient(135deg, #9c6bff 0%, #6b5bdb 100%);
            box-shadow: 0 2px 8px rgba(179, 136, 255, 0.3);
        }

        .search-result-poster {
            width: 60px;
            height: 90px;
            object-fit: cover;
            border-radius: 6px;
            margin-bottom: 6px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        .filter-group { display: flex; gap: 10px; margin-bottom: 10px; }
        .filter-group .btn.selected { background: #667eea; color: white; }
        .watchlist-thumb { 
            width: 32px; /* Reduced from 40px to 32px */
            height: 48px; /* Reduced from 60px to 48px */
            object-fit: cover; 
            border-radius: 4px; 
            margin-right: 10px; /* Reduced from 12px to 10px */
            border: 1px solid #e9ecef; 
        }
        .collection-row {
            background: #e6edfa;
            box-shadow: 0 0 12px 2px #7f7fd5, 0 1px 8px #b388ff inset;
            border-left: 4px solid #7f7fd5;
        }
        .series-row {
            background: #f3e6fa;
            box-shadow: 0 0 12px 2px #b388ff, 0 1px 8px #91eac9 inset;
            border-left: 4px solid #b388ff;
        }
        .watchlist-row.series-row {
            /* For unified rendering, ensure both classes apply */
            background: #f3e6fa;
            box-shadow: 0 0 12px 2px #b388ff, 0 1px 8px #91eac9 inset;
            border-left: 4px solid #b388ff;
        }
        .watchlist-row.collection-row {
            background: #e6edfa;
            box-shadow: 0 0 12px 2px #7f7fd5, 0 1px 8px #b388ff inset;
            border-left: 4px solid #7f7fd5;
        }
        .remove-icon {
            width: 16px; /* Reduced from 20px to 16px */
            height: 16px; /* Reduced from 20px to 16px */
            fill: #6c757d;
            cursor: pointer;
            margin-left: 8px; /* Reduced from 10px to 8px */
            transition: fill 0.2s, filter 0.2s;
            vertical-align: middle;
            filter: drop-shadow(0 0 4px #b388ff);
        }
        .remove-icon:hover {
            fill: #d9534f;
            filter: drop-shadow(0 0 8px #ffb3b3);
        }
        .dropdown-menu {
            box-shadow: 0 0 16px #b388ff, 0 2px 16px rgba(80,60,180,0.18);
            border: 1px solid #b388ff;
        }
        .dropdown-item.selected {
            background: #7f7fd5;
            color: white;
            text-shadow: 0 0 8px #b388ff;
        }
        .dropdown-item:hover {
            background: #b388ff;
            color: white;
            text-shadow: 0 0 8px #91eac9;
        }
        .remove-btn {
            background: none;
            border: none;
            color: #ff6b6b;
            cursor: pointer;
            font-size: 18px;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.2s;
            min-width: 32px;
            min-height: 32px; /* Touch-friendly button size */
        }
        
        .expand-arrow {
            background: none;
            border: none;
            color: #e0e6ff;
            cursor: pointer;
            font-size: 16px;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.2s;
            min-width: 32px;
            min-height: 32px; /* Touch-friendly arrow size */
        }

        /* List Management Overlay Styles */
        .list-management-modal {
            max-width: 800px;
            width: 95%;
        }

        .list-header {
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .list-header:hover {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 16px;
            margin: -16px;
        }

        .list-header-hint {
            position: absolute;
            top: 50%;
            right: 120px;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.8em;
            font-style: italic;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .list-header:hover .list-header-hint {
            opacity: 1;
        }

        .list-management-tabs {
            display: flex;
            gap: 2px;
            margin-bottom: 24px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 4px;
        }

        .tab-button {
            flex: 1;
            padding: 12px 16px;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 8px;
        }

        .tab-button:hover {
            color: rgba(255, 255, 255, 0.8);
            background: rgba(255, 255, 255, 0.05);
        }

        .tab-button.active {
            background: rgba(0, 212, 170, 0.2);
            color: #00d4aa;
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .lists-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 8px;
        }

        .list-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            transition: all 0.3s ease;
            position: relative;
        }

        .list-card:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(0, 212, 170, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        }

        .list-card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .list-card-icon {
            font-size: 2em;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
        }

        .list-card-info {
            flex: 1;
        }

        .list-card-name {
            color: #ffffff;
            font-size: 1.2em;
            font-weight: 600;
            margin: 0 0 4px 0;
        }

        .list-card-meta {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9em;
            margin: 0;
        }

        .list-card-description {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9em;
            line-height: 1.4;
            margin-bottom: 16px;
            min-height: 40px;
        }

        .list-card-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
        }

        .list-stat {
            text-align: center;
        }

        .list-stat-value {
            color: #00d4aa;
            font-size: 1.2em;
            font-weight: 600;
            display: block;
        }

        .list-stat-label {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.8em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .list-card-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .list-action-btn {
            padding: 8px 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.8);
            border-radius: 8px;
            font-size: 0.8em;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .list-action-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.3);
            color: #ffffff;
            transform: translateY(-1px);
        }

        .list-action-btn.primary {
            background: rgba(0, 212, 170, 0.2);
            border-color: #00d4aa;
            color: #00d4aa;
        }

        .list-action-btn.primary:hover {
            background: rgba(0, 212, 170, 0.3);
            color: #ffffff;
        }

        .list-action-btn.danger {
            background: rgba(255, 59, 48, 0.2);
            border-color: #FF3B30;
            color: #FF3B30;
        }

        .list-action-btn.danger:hover {
            background: rgba(255, 59, 48, 0.3);
            color: #ffffff;
        }

        .shared-lists-info {
            text-align: center;
            padding: 40px 20px;
            color: rgba(255, 255, 255, 0.6);
        }

        .shared-lists-info p {
            margin: 8px 0;
            line-height: 1.5;
        }

        .list-settings {
            padding: 20px 0;
        }

        .list-settings h4 {
            color: #e0e0e0;
            margin-bottom: 20px;
            font-size: 1.1em;
            font-weight: 600;
        }

        .setting-item {
            margin-bottom: 16px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .setting-item label {
            display: flex;
            align-items: center;
            gap: 12px;
            color: #e0e0e0;
            font-size: 0.95em;
            cursor: pointer;
            margin: 0;
        }

        .setting-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #00d4aa;
        }

        /* Scrollbar styling for lists grid */
        .lists-grid::-webkit-scrollbar {
            width: 8px;
        }

        .lists-grid::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        .lists-grid::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

        .lists-grid::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Import Selection Dialog Styles */
        .import-selection-modal {
            max-width: 600px;
        }

        .list-selection-options {
            padding: 20px 0;
        }

        .option-group {
            margin-bottom: 24px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .option-label {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            color: #e0e0e0;
            font-size: 1em;
        }

        .option-text {
            font-weight: 500;
        }

        .custom-lists-section h4 {
            color: #e0e0e0;
            margin-bottom: 16px;
            font-size: 1em;
            font-weight: 600;
        }

        .custom-lists-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
        }

        .list-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .list-option:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(0, 212, 170, 0.3);
        }

        .list-option input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: #00d4aa;
        }

        .list-option-icon {
            font-size: 1.2em;
            width: 24px;
            text-align: center;
        }

        .list-option-name {
            color: #e0e0e0;
            font-weight: 500;
            flex: 1;
        }

        /* Force admin console alignment */
        #adminConsoleLink {
            padding: 10px 16px !important;
            display: flex !important;
            align-items: center !important;
            gap: 12px !important;
        }
        
        #adminConsoleLink span {
            width: 20px !important;
            height: 20px !important;
            display: inline-flex !important;
            align-items: center !important;
            justify-content: center !important;
            flex-shrink: 0 !important;
        }

        /* Ensure consistent spacing for all settings items */
        .settings-item span {
            margin-right: 8px;
            display: inline-block;
            vertical-align: middle;
        }

        /* Background color options - darker colors for backgrounds */
        .bg-color-option {
            width: 56px;
            height: 56px;
            border: 3px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .bg-color-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.4);
        }

        .bg-color-option.selected {
            border-color: #00d4aa;
            box-shadow: 0 0 0 3px rgba(0, 212, 170, 0.3);
        }

        .bg-color-option.selected::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ffffff;
            font-size: 20px;
            font-weight: bold;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
        }

        .icon-selector,
        .color-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(56px, 1fr));
            gap: 16px;
            margin-top: 16px;
            max-width: 100%;
        }

        /* Scrollable icon selector container */
        .icon-selector-scrollable {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.03);
            margin-top: 16px;
        }

        .icon-selector-scrollable::-webkit-scrollbar {
            width: 8px;
        }

        .icon-selector-scrollable::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        .icon-selector-scrollable::-webkit-scrollbar-thumb {
            background: rgba(0, 212, 170, 0.3);
            border-radius: 4px;
        }

        .icon-selector-scrollable::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 212, 170, 0.5);
        }

        /* Icon selector grid within scrollable container */
        .icon-selector-scrollable .icon-selector {
            display: grid;
            grid-template-columns: repeat(8, 56px);
            gap: 12px;
            margin-top: 0;
            justify-content: center;
        }
    </style>
    
    <!-- Professional polish overrides: typography, spacing, shadows, a11y -->
    <style>
      :root {
        --radius-card: 12px;
        --radius-chip: 12px;
        --radius-btn: 10px;
        --shadow-soft: 0 6px 24px rgba(0, 0, 0, 0.18);
        --shadow-header: 0 2px 12px rgba(0, 212, 170, 0.25);
      }

      body {
        font-family: Inter, -apple-system, system-ui, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      .container { border-radius: var(--radius-card); box-shadow: var(--shadow-soft); }
      .header { box-shadow: var(--shadow-header); }
      .header h1 { letter-spacing: 0; font-weight: 700; }
      .app-subtitle { color: rgba(255,255,255,0.7); }

      .btn, .btn-primary, .btn-secondary, .btn-success,
      .search-input, .watchlist-item, .stat-card,
      .modal, .episodes-modal, .search-result-card, .search-result-poster,
      .list-chip, .list-action-btn { border-radius: var(--radius-card) !important; }

      .list-chip { border-radius: var(--radius-chip) !important; }

      /* Reduce intense glows */
      .container { box-shadow: 0 6px 24px rgba(0,0,0,0.25); }
      .btn-primary { box-shadow: none; }

      /* Accessible focus states */
      :focus-visible { outline: 3px solid #00d4aa; outline-offset: 2px; border-radius: 6px; }

      /* Respect reduced motion */
      @media (prefers-reduced-motion: reduce) {
        * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto !important; }
      }

      /* Ensure search row stays single-line; maximize input */
      .search-container { width: 100%; }
      .search-box { flex-wrap: nowrap; width: 100%; }

      .search-box .btn-primary { flex: 0 0 120px; white-space: nowrap; }
      .search-input-wrapper { flex: 1 1 auto; min-width: 0; }
    </style>
    <style>
@media (min-width: 900px) {
  /* Desktop: use grid to force middle to fill */
  .search-box { display: grid; grid-template-columns: 1fr auto; align-items: center; width: 100%; }
  .search-input-wrapper { width: 100%; min-width: 0; }
  .search-input { width: 100%; }

  .search-box .btn-primary { width: 140px; }
}
    </style>
    <style>
    /* Responsive styles for mobile devices */
    @media (max-width: 600px) {
        body {
            padding: 4px; /* Reduced from 6px to 4px */
        }
        .container {
            max-width: 100vw;
            margin: 0;
            border-radius: 0;
            box-shadow: none;
            border-top-width: 2px;
        }
        .header {
            padding: 6px 8px; /* tighter top/bottom */
            font-size: 0.9em; /* Reduced from 1em to 0.9em */
        }
        .header h1 {
            font-size: 1.2em; /* Reduced from 1.4em to 1.2em */
        }
        .header-actions {
            top: 6px; /* Reduced from 8px to 6px */
            right: 6px; /* Reduced from 8px to 6px */
        }
        .content {
            padding: 4px 2px; /* tighter gap below header */
        }
        .search-section {
            padding: 6px 4px; /* tighter */
        }
        .search-form { flex-direction: column; gap: 6px; }
        .btn, .btn-primary, .btn-secondary, .btn-success {
            font-size: 1em;
            padding: 12px 14px;
            border-radius: 8px;
            min-height: 44px; /* Touch-friendly minimum height */
        }
        .button-group {
            flex-direction: column;
            gap: 8px;
        }
        .search-input {
            font-size: 1em;
            padding: 12px 10px 12px 36px; /* tighter */
            border-radius: 8px;
            min-height: 44px; /* Touch-friendly minimum height */
        }
        .search-result-poster {
            width: 100px;
            height: 140px;
        }
        .search-results {
            grid-template-columns: 1fr;
            gap: 12px;
        }
        .result-card, .search-result-card {
            padding: 10px 4px;
        }
        .tabs {
            flex-direction: column;
            gap: 4px;
        }
        .tab {
            padding: 10px 0;
            font-size: 1em;
        }
        .watchlist-grid, .stats {
            grid-template-columns: 1fr;
            gap: 12px;
        }
        .watchlist-item, .stat-card {
            padding: 12px 4px;
        }
        .episodes-modal {
            max-width: 98vw;
            padding: 10px 2px;
        }
        .episodes-header {
            flex-direction: column;
            gap: 8px;
            padding-bottom: 10px;
        }
        .season-section h3 {
            font-size: 1em;
            padding: 6px;
        }
        .episode-item {
            flex-direction: column;
            align-items: flex-start;
            padding: 10px 4px;
        }
        .watchlist-list {
            max-width: 100vw;
            border-radius: 0;
            box-shadow: none;
            padding: 0;
        }
        .watchlist-row, .episode-row {
            flex-direction: column;
            align-items: flex-start;
            gap: 8px;
            padding: 12px 8px;
        }
        .watchlist-item-info {
            width: 100%;
        }
        .watchlist-item-actions {
            width: 100%;
            justify-content: flex-end;
            gap: 8px;
        }
        .search-box {
            flex-direction: row; /* keep inline */
            flex-wrap: nowrap;
            gap: 6px;
            align-items: center;
        }
        .search-input-wrapper {
            width: auto;
            flex: 1 1 auto;
            min-width: 0; /* allow shrinking */
        }

        .search-box .btn-primary { flex: 0 0 auto; white-space: nowrap; padding: 10px 12px; }
        .btn { padding: 12px 16px; font-size: 14px; }
        .modal {
            padding: 16px;
        }
        .modal-content {
            max-width: 95vw;
            margin: 10px;
        }
        .settings-dropdown {
            right: 8px;
            top: 100%;
            min-width: 200px;
        }
        .settings-item {
            padding: 12px 16px;
            font-size: 14px;
        }
        .checkbox {
            width: 28px;
            height: 28px;
            min-width: 20px;
            min-height: 20px; /* Touch-friendly checkbox size */
        }
        .logout-btn {
            font-size: 1em;
            padding: 10px 18px;
        }
    }
    </style>
    <style>
    /* Enhanced mobile fixes for stacking and header */
    @media (max-width: 600px) {
        /* Force stacking for import-by-URL row */
        #search > div[style*="display: flex"] {
            flex-direction: column !important;
            gap: 8px !important;
            align-items: stretch !important;
        }
        /* Force stacking for search forms */
        .search-form {
            flex-direction: column !important;
            gap: 8px !important;
        }
        #searchMoviesForm, #searchSeriesForm {
            flex-direction: column !important;
            gap: 8px !important;
            width: 100% !important;
        }
        /* Make search buttons full width */
        #importByUrlBtn, #searchMoviesForm button, #searchSeriesForm button {
            width: 100% !important;
            min-width: 0 !important;
        }
        /* Header and logout button fixes */
        .header {
            position: relative;
            padding-top: 48px;
        }
        .header-actions {
            position: static !important;
            width: 100%;
            margin-bottom: 10px;
            display: flex;
            justify-content: flex-end;
        }
        .logout-btn {
            width: 100%;
            margin: 0;
            font-size: 1.1em;
            padding: 12px 0;
        }
        .header h1 {
            margin-top: 0;
        }
        /* Add spacing below header */
        .content {
            margin-top: 10px;
        }
    }
    </style>
    <style>
    /* Mobile visual refinements */
    @media (max-width: 600px) {
        /* Add horizontal padding */
        .container {
            padding-left: 8px;
            padding-right: 8px;
        }
        .content {
            padding-left: 2px;
            padding-right: 2px;
        }
        /* Reduce card/row height and font size */
        .watchlist-item, .stat-card {
            padding: 8px 6px;
            font-size: 0.98em;
            border-radius: 14px;
            margin-bottom: 10px;
        }
        .watchlist-row, .episode-row {
            padding: 6px 2px;
            font-size: 0.98em;
            border-radius: 10px;
            margin-bottom: 6px;
        }
        .series-header {
            padding: 6px 2px;
            font-size: 1em;
            border-radius: 10px 10px 0 0;
        }
        /* Add spacing between cards/rows */
        .watchlist-item + .watchlist-item, .stat-card + .stat-card {
            margin-top: 6px;
        }
        /* Buttons and filter/sort bar tweaks */
        .btn, .btn-primary, .btn-secondary, .btn-success, #clearAllDataBtn {
            padding: 10px 0;
            font-size: 0.98em;
            border-radius: 8px;
        }
        #clearAllDataBtn {
            min-width: 0 !important;
        }
        /* Slightly smaller titles */
        .watchlist-item h3, .stat-card h3 {
            font-size: 1.1em;
        }
        /* Add a little more space below header */
        .header {
            margin-bottom: 8px;
        }
    }
    </style>
    <style>
    /* Mobile list-style compact watchlist */
    @media (max-width: 600px) {
        /* Watchlist row as horizontal list */
        .watchlist-row, .watchlist-item {
            display: flex !important;
            flex-direction: row !important;
            align-items: center !important;
            padding: 4px 2px !important;
            min-height: 60px;
            border-radius: 10px;
            margin-bottom: 6px;
        }
        .watchlist-row .checkbox, .watchlist-item .checkbox {
            margin-right: 6px;
            margin-bottom: 0;
            width: 22px;
            height: 22px;
        }
        .watchlist-thumb, .watchlist-row img, .watchlist-item img {
            width: 44px !important;
            height: 66px !important;
            min-width: 44px;
            min-height: 66px;
            object-fit: cover;
            border-radius: 6px;
            margin-right: 8px;
            margin-bottom: 0;
        }
        .watchlist-row .title, .watchlist-item .title {
            font-size: 1em;
            font-weight: 500;
            margin-bottom: 2px;
        }
        .watchlist-row .meta, .watchlist-item .meta {
            font-size: 0.95em;
            margin-bottom: 0;
        }
        /* Info and controls in a column, but tight */
        .watchlist-info {
            flex: 1 1 auto;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-width: 0;
        }
        .watchlist-controls {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 6px;
            margin-left: 8px;
        }
        .watchlist-row button, .watchlist-row .remove-icon, .watchlist-item button, .watchlist-item .remove-icon {
            font-size: 1em;
            padding: 4px 8px;
            min-width: 0;
            height: 32px;
        }
        /* Play bar and delete icon inline */
        .watchlist-row .play-bar, .watchlist-item .play-bar {
            margin: 0 6px 0 0;
            width: 60px;
            height: 28px;
            display: inline-block;
            vertical-align: middle;
        }
        .watchlist-row .remove-icon, .watchlist-item .remove-icon {
            width: 22px;
            height: 22px;
            margin-left: 4px;
        }
        /* Remove extra vertical space in cards */
        .watchlist-item h3, .stat-card h3 {
            font-size: 1em;
            margin: 0 0 2px 0;
        }
    }
    </style>
    
    <style>
    /* Collection and series episode indentation - applies to all screen sizes */
    .collection-episodes > div, .series-episodes > div {
        margin-left: 16px !important;
    }
    
    /* Nuclear option - target any watchlist-row inside collection-episodes */
    .collection-episodes .watchlist-row {
        margin-left: 16px !important;
    }
    
    /* More specific rule to ensure it overrides universal reset */
    div.collection-episodes > div.watchlist-row {
        margin-left: 16px !important;
    }
    
    /* Add container indentation for collection-episodes to match series-episodes */
    .collection-episodes {
        margin-left: 10px !important;
        border-left: 2px solid #e9ecef;
    }
    
    /* New item notification styles */
    .new-item {
        background: linear-gradient(135deg, #fff5f5 0%, #fff 100%);
        border-left: 4px solid #ff4757;
        animation: newItemPulse 2s ease-in-out infinite;
    }
    
    .new-badge {
        background: #ff4757;
        color: white;
        font-size: 10px;
        font-weight: bold;
        padding: 2px 6px;
        border-radius: 10px;
        margin-left: 8px;
        display: inline-block;
        animation: badgePulse 1.5s ease-in-out infinite;
    }
    
    @keyframes newItemPulse {
        0%, 100% { box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.4); }
        50% { box-shadow: 0 0 0 4px rgba(255, 71, 87, 0.1); }
    }
    
    @keyframes badgePulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
    }
    
    .new-items-section {
        border: 2px solid #ff4757;
        border-radius: 8px;
        margin-bottom: 20px;
        background: linear-gradient(135deg, #fff5f5 0%, #fff 100%);
    }
    
    .new-items-section h3 {
        color: #ff4757;
        margin: 0;
        padding: 10px 15px;
        background: #ff4757;
        color: white;
        border-radius: 6px 6px 0 0;
    }
    
    /* Watch time filter button styles */
    .filter-btn {
        background: #6c757d;
        color: white;
        border: none;
        padding: 6px 12px;
        border-radius: 6px;
        font-size: 12px;
        cursor: pointer;
        transition: all 0.3s;
        font-weight: 500;
    }
    
    .filter-btn:hover {
        background: #5a6268;
        transform: translateY(-1px);
    }
    
    .filter-btn.active {
        background: #00d4aa;
        box-shadow: 0 2px 8px rgba(0, 212, 170, 0.3);
    }
    
    .filter-btn.active:hover {
        background: #00b894;
    }
    
    .watchlist-filters {
        margin-bottom: 15px;
        display: flex;
        gap: 10px;
        align-items: center;
        flex-wrap: wrap;
    }
    
    .filter-label {
        color: #e0e6ff;
        font-weight: 500;
        font-size: 14px;
    }
    
    .filter-buttons {
        display: flex;
        gap: 6px;
        flex-wrap: wrap;
    }
    

    
    /* Mixed state checkbox styling */
    .checkbox.mixed-state {
        position: relative;
    }
    
    .checkbox.mixed-state:checked {
        background: #00d4aa;
        border-color: #00d4aa;
    }
    
    .checkbox.mixed-state:checked::after {
        content: '';
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        width: 8px;
        height: 2px;
        background: white;
        border-radius: 1px;
    }

    /* List Management Styles */
    .list-management-container {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 16px;
        padding: 16px 20px;
        margin: 8px 0 20px 0;
        border: 1px solid rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
    }

    .list-management-row {
        display: flex;
        align-items: center;
        gap: 20px;
        min-height: 48px;
    }

    .list-header-section {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        gap: 4px;
        cursor: pointer;
        padding: 8px 12px;
        border-radius: 12px;
        transition: all 0.3s ease;
        min-width: 120px;
        flex-shrink: 0;
    }

    .list-header-section:hover {
        background: rgba(255, 255, 255, 0.08);
        transform: translateY(-1px);
    }

    .list-header-section h3 {
        color: #e0e0e0;
        margin: 0;
        font-size: 1.1em;
        font-weight: 600;
        line-height: 1.2;
    }

    .list-header-hint {
        color: rgba(255, 255, 255, 0.5);
        font-size: 0.75em;
        font-style: italic;
        line-height: 1.2;
    }

    .list-chips-section {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        flex: 1;
        align-items: center;
        min-height: 48px;
    }

    .list-actions-section {
        display: flex;
        align-items: center;
        gap: 12px;
        flex-shrink: 0;
    }

    .list-chip {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 14px;
        background: rgba(255, 255, 255, 0.08);
        border: 2px solid rgba(255, 255, 255, 0.15);
        border-radius: 18px;
        color: #e0e0e0;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.85em;
        font-weight: 500;
        white-space: nowrap;
        max-height: 36px;
    }

    .list-chip:hover {
        background: rgba(255, 255, 255, 0.12);
        border-color: rgba(255, 255, 255, 0.25);
        transform: translateY(-1px);
    }

    .list-chip.active {
        background: rgba(0, 212, 170, 0.2);
        border-color: #00d4aa;
        color: #ffffff;
        box-shadow: 0 0 0 2px rgba(0, 212, 170, 0.3);
    }

    .list-icon {
        font-size: 1em;
    }

    .list-name {
        font-weight: 600;
    }

    .list-count {
        background: rgba(255, 255, 255, 0.15);
        padding: 2px 6px;
        border-radius: 8px;
        font-size: 0.75em;
        font-weight: 600;
        min-width: 18px;
        text-align: center;
    }

    .list-chip.active .list-count {
        background: rgba(255, 255, 255, 0.25);
    }

    /* Responsive design for smaller screens */
    @media (max-width: 768px) {
        .list-management-row {
            flex-direction: column;
            gap: 16px;
            align-items: stretch;
        }
        
        .list-header-section {
            align-items: center;
            text-align: center;
            min-width: auto;
        }
        
        .list-chips-section {
            justify-content: center;
            min-height: auto;
        }
        
        .list-actions-section {
            justify-content: center;
        }
    }

    /* Modal Styles */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        backdrop-filter: blur(5px);
        padding: 20px;
    }



    .modal {
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        border-radius: 20px;
        padding: 0;
        max-width: 95%;
        width: 100%;
        max-height: 95vh;
        border: 2px solid #00d4aa;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column;
    }

    .modal-header {
        background: linear-gradient(90deg, #00d4aa 0%, #00b894 100%);
        padding: 28px 32px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        text-align: center;
        flex-shrink: 0;
    }

    .modal-header h3 {
        color: #ffffff;
        margin: 0 0 8px 0;
        font-size: 1.8em;
        font-weight: 600;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    }

    .modal-subtitle {
        color: rgba(255, 255, 255, 0.8);
        margin: 0;
        font-size: 1em;
        font-weight: 400;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    }

    .modal-body {
        padding: 32px;
        flex: 1;
        overflow-y: auto;
    }

    /* Full-width form layout */
    .form-layout {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 40px;
        align-items: start;
    }

    .form-left-column {
        display: flex;
        flex-direction: column;
        gap: 28px;
    }

    .form-right-column {
        display: flex;
        flex-direction: column;
        gap: 28px;
    }

    .form-group {
        margin-bottom: 0;
    }

    .form-group.full-width {
        grid-column: 1 / -1;
        margin-bottom: 28px;
    }

    .form-group label {
        display: block;
        margin-bottom: 12px;
        color: #e0e0e0;
        font-weight: 600;
        font-size: 1.1em;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .input-hint {
        margin-top: 8px;
        color: rgba(255, 255, 255, 0.5);
        font-size: 0.9em;
        font-style: italic;
        line-height: 1.4;
    }

    .modal input, .modal textarea {
        width: 100%;
        padding: 16px 18px;
        border: 2px solid rgba(255, 255, 255, 0.2);
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.08);
        color: #ffffff;
        font-size: 1em;
        font-family: inherit;
        transition: all 0.3s ease;
        box-sizing: border-box;
    }

    .modal input:focus, .modal textarea:focus {
        outline: none;
        border-color: #00d4aa;
        background: rgba(255, 255, 255, 0.12);
        box-shadow: 0 0 0 3px rgba(0, 212, 170, 0.15);
        transform: translateY(-1px);
    }

    .modal input::placeholder, .modal textarea::placeholder {
        color: rgba(255, 255, 255, 0.4);
    }

    .icon-selector,
    .color-selector {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(56px, 1fr));
        gap: 16px;
        margin-top: 16px;
        max-width: 100%;
    }

    .icon-option {
        width: 56px;
        height: 56px;
        border: 2px solid rgba(255, 255, 255, 0.15);
        border-radius: 16px;
        background: rgba(255, 255, 255, 0.06);
        color: #ffffff;
        font-size: 24px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
    }

    .icon-option:hover {
        border-color: #00d4aa;
        background: rgba(0, 212, 170, 0.12);
        transform: translateY(-2px);
        box-shadow: 0 4px 16px rgba(0, 212, 170, 0.2);
    }

    .icon-option.selected {
        border-color: #00d4aa;
        background: rgba(0, 212, 170, 0.2);
        box-shadow: 0 0 0 3px rgba(0, 212, 170, 0.3);
    }

    .icon-option.selected::after {
        content: '';
        position: absolute;
        top: 8px;
        right: 8px;
        width: 12px;
        height: 12px;
        background: #00d4aa;
        border-radius: 50%;
        border: 2px solid #ffffff;
    }

    .color-option {
        width: 56px;
        height: 56px;
        border: 3px solid rgba(255, 255, 255, 0.2);
        border-radius: 16px;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .color-option:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
        border-color: rgba(255, 255, 255, 0.4);
    }

    .color-option.selected {
        border-color: #ffffff;
        box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3);
    }

    .color-option.selected::after {
        content: '‚úì';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: #ffffff;
        font-size: 20px;
        font-weight: bold;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
    }

    .modal-buttons {
        display: flex;
        gap: 16px;
        justify-content: flex-end;
        padding: 24px 32px;
        background: rgba(0, 0, 0, 0.1);
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        flex-shrink: 0;
    }

    .modal-buttons .btn {
        padding: 14px 28px;
        border: none;
        border-radius: 12px;
        font-size: 1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        min-width: 120px;
    }

    .modal-buttons .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
    }

    /* Modal responsive design */
    @media (max-width: 768px) {
        .form-layout {
            grid-template-columns: 1fr;
            gap: 24px;
        }
        
        .modal {
            max-width: 98%;
            max-height: 98vh;
        }
        
        .modal-header {
            padding: 20px 24px;
        }
        
        .modal-body {
            padding: 24px;
        }
        
        .modal-buttons {
            padding: 20px 24px;
            flex-direction: column;
        }
        
        .modal-buttons .btn {
            width: 100%;
        }
    }

    @media (max-width: 600px) {
      /* Force single-line search row with fixed edges and flexible center */
      .search-box { display: flex; flex-wrap: nowrap; gap: 6px; align-items: center; }

      .search-input-wrapper { flex: 1 1 auto; min-width: 0; }
      .search-input { width: 100%; padding: 10px 10px 10px 32px; font-size: 14px; }
      .search-input::placeholder { font-size: 0.95em; }
      .search-icon { left: 8px; font-size: 12px; }
      .search-box .btn-primary { flex: 0 0 96px; padding: 10px 12px; font-size: 14px; white-space: nowrap; }
      /* Slightly reduce header vertical space */
      .header { padding-top: 6px; padding-bottom: 8px; }
    }
    /* Narrower phones: shrink edges further */
    @media (max-width: 420px) {

      .search-box .btn-primary { flex: 0 0 84px; font-size: 13px; }
      .search-input { font-size: 13px; padding-left: 30px; }
      /* Swap button label to icon on narrow screens */
      .btn .btn-label { display: none; }
      .btn .btn-icon { display: inline !important; }

    }
    @media (max-width: 360px) {

      .search-box .btn-primary { flex: 0 0 72px; font-size: 12px; }
      .search-input { font-size: 12px; }
    }

    /* Smart Omnibox Results Styles */
    .smart-omnibox-results {
        margin-top: 10px;
        padding: 0;
    }

    .search-section-header {
        margin-bottom: 8px;
    }

    .search-section-header h3 {
        color: #e0e6ff;
        font-size: 18px;
        font-weight: 600;
        margin: 0;
        padding: 0;
    }

    /* Local Results - Horizontal Scrollable Cards */
    .local-search-section {
        margin-bottom: 4px;
    }

    .local-results-container {
        display: block;
        padding: 8px 0;
    }



    .local-result-card {
        background: #2a2a2a;
        border-radius: 8px;
        padding: 12px;
        margin-bottom: 8px;
        border-left: 3px solid #4ECDC4;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .local-result-card:hover {
        background: #333;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(78, 205, 196, 0.2);
    }

    .local-result-poster {
        width: 60px;
        height: 90px;
        object-fit: cover;
        border-radius: 6px;
        flex-shrink: 0;
    }

    .local-result-info {
        flex: 1;
        text-align: left;
    }

    .local-result-title {
        color: #fff;
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 4px;
        line-height: 1.3;
    }

    .local-result-meta {
        color: #b0b0b0;
        font-size: 14px;
    }

    /* Import Results - 2-Column Grid */
    .import-search-section {
        margin-bottom: 4px;
    }

    .import-results-grid {
        display: grid;
        grid-template-columns: repeat(6, 1fr);
        gap: 12px;
        padding: 16px 0;
    }

    .import-result-card {
        background: #2a2a2a;
        border-radius: 8px;
        border: 1px solid #444;
        overflow: hidden;
        transition: all 0.2s ease;
        display: flex;
        flex-direction: column;
    }

    .import-result-card:hover {
        border-color: #4ECDC4;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(78, 205, 196, 0.2);
    }

    .import-result-poster {
        width: 100%;
        height: 120px;
        object-fit: cover;
    }

    .import-result-info {
        padding: 8px;
        flex: 1;
        display: flex;
        flex-direction: column;
    }

    .import-result-title {
        color: #fff;
        font-size: 12px;
        font-weight: 600;
        margin-bottom: 4px;
        line-height: 1.2;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .import-result-meta {
        color: #b0b0b0;
        font-size: 10px;
        margin-bottom: 8px;
        flex: 1;
    }

    .import-result-card .import-btn {
        width: 100%;
        padding: 6px 8px;
        font-size: 11px;
        font-weight: 600;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .import-result-card .import-movie-btn {
        background: #4ECDC4;
        color: #1a1a1a;
    }

    .import-result-card .import-movie-btn:hover {
        background: #3bb5ad;
    }

    .import-result-card .import-series-btn {
        background: #ff6b6b;
        color: #fff;
    }

    .import-result-card .import-series-btn:hover {
        background: #ff5252;
    }

    /* Responsive Design for Smart Omnibox */
    @media (max-width: 1200px) {
        .import-results-grid {
            grid-template-columns: repeat(4, 1fr);
        }
    }
    
    @media (max-width: 768px) {
        .import-results-grid {
            grid-template-columns: repeat(3, 1fr);
        }
        
        .local-result-card {
            min-width: 120px;
        }
        
        .local-result-poster {
            height: 80px;
        }
        
        .import-result-poster {
            height: 100px;
        }
    }

    @media (max-width: 480px) {
        .import-results-grid {
            grid-template-columns: repeat(2, 1fr);
        }
        
        .local-results-container {
            gap: 8px;
        }
        
        .local-result-card {
            min-width: 100px;
            padding: 8px;
        }
        
        .local-result-poster {
            height: 60px;
        }
        
        .local-result-title {
            font-size: 12px;
        }
        
        .local-result-meta {
            font-size: 10px;
        }
        
        .import-result-poster {
            height: 120px;
        }
        
        .import-result-info {
            padding: 8px;
        }
        
        .import-result-title {
            font-size: 14px;
        }
        
        .import-result-meta {
            font-size: 12px;
        }
    }
</style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <div class="app-brand">
                    <img src="/static/icons/viewvault-mark.svg" alt="ViewVault" class="app-icon">
                    <div>
                        <h1>ViewVault</h1>
                        <div class="app-subtitle">Track what you watch</div>
                    </div>
                </div>
                <div class="header-actions">
                    <div class="settings-menu">
                        <button class="settings-btn" id="settingsBtn">‚ò∞</button>
                        <div class="settings-dropdown" id="settingsDropdown">
                            <div class="menu-section-header">Watchlist Actions</div>
                            <div class="settings-item" data-action="showSortOptions" aria-label="Sort">
                                <span><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M11 18h10v2H11v-2zm-8-1l4-4 4 4H3zm8-5h10v2H11v-2zM3 7h18v2H3V7zm0-6h18v2H3V1z"/></svg></span> Sort
                            </div>
                            <div class="settings-item" data-action="showFilterOptions" aria-label="Filters">
                                <span><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M3 4h18v2l-7 7v6l-4 3v-9L3 6V4z"/></svg></span> Filters
                            </div>
                            <div class="settings-item" data-action="toggleListManagement" aria-label="Lists">
                                <span><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M3 5h14v4H3V5zm0 6h14v4H3v-4zm16 0h2v4h-2v-4zm0-6h2v4h-2V5z"/></svg></span> Lists
                            </div>
                            <div class="menu-section-header">System</div>
                            <div class="settings-item" data-action="importFromJellyfin" aria-label="Import from Jellyfin">
                                <span><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M19 18H6a4 4 0 010-8 5.5 5.5 0 0110.6-1.5A4.5 4.5 0 1119 18zm-7-7v4h3l-4 4-4-4h3v-4h2z"/></svg></span> Import from Jellyfin
                            </div>
                            <div class="settings-item" data-action="showListManagementOverlay" aria-label="Manage Lists">
                                <span><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M4 4h16v2H4V4zm0 4h10v2H4V8zm0 4h16v2H4v-2zm0 4h10v2H4v-2z"/></svg></span> Manage Lists
                            </div>
                            <div class="settings-item admin-only" id="adminConsoleLink" style="display: none;" aria-label="Admin Console">
                                <span><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M19.14,12.94a7.07,7.07,0,0,0,.05-1,7.07,7.07,0,0,0-.05-1l2.11-1.65a.5.5,0,0,0,.12-.64l-2-3.46a.5.5,0,0,0-.6-.22l-2.49,1a7.28,7.28,0,0,0-1.73-1l-.38-2.65A.5.5,0,0,0,13,1H11a.5.5,0,0,0-.5.42L10.12,4.07a7.28,7.28,0,0,0-1.73,1l-2.49-1a.5.5,0,0,0-.6.22l-2,3.46a.5.5,0,0,0,.12.64L5.14,10a7.07,7.07,0,0,0-.05,1,7.07,7.07,0,0,0,.05,1L3,13.65a.5.5,0,0,0-.12.64l2,3.46a.5.5,0,0,0,.6.22l2.49-1a7.28,7.28,0,0,0,1.73,1l.38,2.65A.5.5,0,0,0,11,23h2a.5.5,0,0,0,.5-.42l.38-2.65a7.28,7.28,0,0,0,1.73-1l2.49,1a.5.5,0,0,0,.6-.22l2-3.46a.5.5,0,0,0-.12-.64ZM12,15.5A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"/></svg></span> Admin Console
                            </div>
                            <div class="settings-item" data-action="account" aria-label="Account">
                                <span><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 12c2.761 0 5-2.239 5-5s-2.239-5-5-5-5 2.239-5 5 2.239 5 5 5zm0 2c-4.418 0-8 2.239-8 5v3h16v-3c0-2.761-3.582-5-8-5z"/></svg></span> Account
                            </div>
                            <div class="settings-item" data-action="logout" aria-label="Logout">
                                <span><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M10 17v-2h4v-2h-4V9l-5 4 5 4zm4-14h6v18h-6v-2h4V5h-4V3z"/></svg></span> Logout
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="content">
            <!-- Search Section -->
            <div class="search-container">
                <div class="search-box">
                    <div class="search-input-wrapper">
                        <span class="search-icon"></span>
                        <input id="importTypeInput" class="search-input" type="text" placeholder="Search watchlist or find new content..." />
                    </div>
                    <button class="btn btn-primary" id="importTypeSubmitBtn" aria-label="Search">
                        <span class="btn-label">Search</span>
                        <span class="btn-icon" style="display:none">üîç</span>
                    </button>
                </div>
            </div>
            <div id="searchResultsMovies" class="search-results"></div>
            <div id="searchResultsSeries" class="search-results"></div>

            <!-- List Management Section -->
            <div class="list-management-container" id="listManagementContainer" style="display: none;">
                <div class="list-management-row">
                    <div class="list-header-section" onclick="showListManagementOverlay()">
                        <h3>üìã Lists</h3>
                        <div class="list-header-hint">Click to manage</div>
                    </div>
                    <div class="list-chips-section" id="listSelector">
                        <!-- Lists will be populated here -->
                    </div>
                    <div class="list-actions-section">
                        <button class="btn btn-secondary" id="createListBtn">+ New List</button>
                    </div>
                </div>
            </div>

            <!-- Watchlist Section - Always Visible -->
            <div style="margin-top: 0;">
                <div id="watchlistContent">
                    <div class="loading">Loading your watchlist...</div>
                </div>
                
                <!-- Smart Omnibox Search Results -->
                <div id="smartOmniboxResults" class="smart-omnibox-results" style="display: none;">
                    <!-- Local and import search results will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Create List Modal -->
    <div id="createListModal" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3>üìã Create New List</h3>
                <p class="modal-subtitle">Organize your watchlist with custom lists</p>
            </div>
            <div class="modal-body">
                <div class="form-layout">
                    <div class="form-left-column">
                        <div class="form-group full-width">
                            <label for="listNameInput">List Name</label>
                            <input type="text" id="listNameInput" placeholder="Enter a memorable name for your list" maxlength="50" required>
                            <div class="input-hint">Choose a name that helps you organize your content</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="listDescriptionInput">Description</label>
                            <textarea id="listDescriptionInput" placeholder="What kind of content will this list contain?" rows="4" maxlength="200"></textarea>
                            <div class="input-hint">Optional: Add context about your list's purpose</div>
                        </div>
                    </div>
                    
                    <div class="form-right-column">
                        <div class="form-group">
                            <label>Choose an Icon</label>
                            <div class="icon-selector-scrollable">
                                <div class="icon-selector">
                                    <!-- Action & Adventure -->
                                    <button type="button" class="icon-option selected" data-icon="üìã" onclick="selectIcon('üìã')" title="Clipboard">üìã</button>
                                    <button type="button" class="icon-option" data-icon="üé¨" onclick="selectIcon('üé¨')" title="Movie">üé¨</button>
                                    <button type="button" class="icon-option" data-icon="üöÄ" onclick="selectIcon('üöÄ')" title="Rocket">üöÄ</button>
                                    <button type="button" class="icon-option" data-icon="‚öîÔ∏è" onclick="selectIcon('‚öîÔ∏è')" title="Swords">‚öîÔ∏è</button>
                                    <button type="button" class="icon-option" data-icon="üèéÔ∏è" onclick="selectIcon('üèéÔ∏è')" title="Race Car">üèéÔ∏è</button>
                                    <button type="button" class="icon-option" data-icon="ü™ñ" onclick="selectIcon('ü™ñ')" title="Military">ü™ñ</button>
                                    <button type="button" class="icon-option" data-icon="üåã" onclick="selectIcon('üåã')" title="Volcano">üåã</button>
                                    <button type="button" class="icon-option" data-icon="üèîÔ∏è" onclick="selectIcon('üèîÔ∏è')" title="Mountain">üèîÔ∏è</button>
                                    
                                    <!-- Comedy -->
                                    <button type="button" class="icon-option" data-icon="üòÇ" onclick="selectIcon('üòÇ')" title="Laughing">üòÇ</button>
                                    <button type="button" class="icon-option" data-icon="ü§£" onclick="selectIcon('ü§£')" title="ROFL">ü§£</button>
                                    <button type="button" class="icon-option" data-icon="üé≠" onclick="selectIcon('üé≠')" title="Theater">üé≠</button>
                                    <button type="button" class="icon-option" data-icon="üé™" onclick="selectIcon('üé™')" title="Circus">üé™</button>
                                    <button type="button" class="icon-option" data-icon="üé®" onclick="selectIcon('üé®')" title="Art">üé®</button>
                                    <button type="button" class="icon-option" data-icon="üé§" onclick="selectIcon('üé§')" title="Microphone">üé§</button>
                                    <button type="button" class="icon-option" data-icon="üéµ" onclick="selectIcon('üéµ')" title="Music">üéµ</button>
                                    
                                    <!-- Horror & Thriller -->
                                    <button type="button" class="icon-option" data-icon="üëª" onclick="selectIcon('üëª')" title="Ghost">üëª</button>
                                    <button type="button" class="icon-option" data-icon="ü¶á" onclick="selectIcon('ü¶á')" title="Bat">ü¶á</button>
                                    <button type="button" class="icon-option" data-icon="üï∑Ô∏è" onclick="selectIcon('üï∑Ô∏è')" title="Spider">üï∑Ô∏è</button>
                                    <button type="button" class="icon-option" data-icon="üíÄ" onclick="selectIcon('üíÄ')" title="Skull">üíÄ</button>
                                    <button type="button" class="icon-option" data-icon="ü©∏" onclick="selectIcon('ü©∏')" title="Blood">ü©∏</button>
                                    <button type="button" class="icon-option" data-icon="üî™" onclick="selectIcon('üî™')" title="Knife">üî™</button>
                                    <button type="button" class="icon-option" data-icon="üïØÔ∏è" onclick="selectIcon('üïØÔ∏è')" title="Candle">üïØÔ∏è</button>
                                    
                                    <!-- Sci-Fi & Fantasy -->
                                    <button type="button" class="icon-option" data-icon="üëΩ" onclick="selectIcon('üëΩ')" title="Alien">üëΩ</button>
                                    <button type="button" class="icon-option" data-icon="üõ∏" onclick="selectIcon('üõ∏')" title="UFO">üõ∏</button>
                                    <button type="button" class="icon-option" data-icon="üîÆ" onclick="selectIcon('üîÆ')" title="Crystal Ball">üîÆ</button>
                                    <button type="button" class="icon-option" data-icon="üêâ" onclick="selectIcon('üêâ')" title="Dragon">üêâ</button>
                                    <button type="button" class="icon-option" data-icon="üßô‚Äç‚ôÇÔ∏è" onclick="selectIcon('üßô‚Äç‚ôÇÔ∏è')" title="Wizard">üßô‚Äç‚ôÇÔ∏è</button>
                                    <button type="button" class="icon-option" data-icon="‚ö°" onclick="selectIcon('‚ö°')" title="Lightning">‚ö°</button>
                                    <button type="button" class="icon-option" data-icon="üåü" onclick="selectIcon('üåü')" title="Star">üåü</button>
                                    
                                    <!-- Romance & Drama -->
                                    <button type="button" class="icon-option" data-icon="üíï" onclick="selectIcon('üíï')" title="Hearts">üíï</button>
                                    <button type="button" class="icon-option" data-icon="üåπ" onclick="selectIcon('üåπ')" title="Rose">üåπ</button>
                                    <button type="button" class="icon-option" data-icon="üíç" onclick="selectIcon('üíç')" title="Ring">üíç</button>
                                    <button type="button" class="icon-option" data-icon="üé≠" onclick="selectIcon('üé≠')" title="Drama">üé≠</button>
                                    <button type="button" class="icon-option" data-icon="üíî" onclick="selectIcon('üíî')" title="Broken Heart">üíî</button>
                                    <button type="button" class="icon-option" data-icon="üåô" onclick="selectIcon('üåô')" title="Moon">üåô</button>
                                    <button type="button" class="icon-option" data-icon="‚òî" onclick="selectIcon('‚òî')" title="Umbrella">‚òî</button>
                                    
                                    <!-- Family & Kids -->
                                    <button type="button" class="icon-option" data-icon="üë∂" onclick="selectIcon('üë∂')" title="Baby">üë∂</button>
                                    <button type="button" class="icon-option" data-icon="üß∏" onclick="selectIcon('üß∏')" title="Teddy Bear">üß∏</button>
                                    <button type="button" class="icon-option" data-icon="üéà" onclick="selectIcon('üéà')" title="Balloon">üéà</button>
                                    <button type="button" class="icon-option" data-icon="üåà" onclick="selectIcon('üåà')" title="Rainbow">üåà</button>
                                    <button type="button" class="icon-option" data-icon="ü¶Ñ" onclick="selectIcon('ü¶Ñ')" title="Unicorn">ü¶Ñ</button>
                                    <button type="button" class="icon-option" data-icon="üç≠" onclick="selectIcon('üç≠')" title="Lollipop">üç≠</button>
                                    <button type="button" class="icon-option" data-icon="üé†" onclick="selectIcon('üé†')" title="Carousel">üé†</button>
                                    
                                    <!-- Documentary & Educational -->
                                    <button type="button" class="icon-option" data-icon="üìö" onclick="selectIcon('üìö')" title="Books">üìö</button>
                                    <button type="button" class="icon-option" data-icon="üî¨" onclick="selectIcon('üî¨')" title="Microscope">üî¨</button>
                                    <button type="button" class="icon-option" data-icon="üåç" onclick="selectIcon('üåç')" title="Earth">üåç</button>
                                    <button type="button" class="icon-option" data-icon="ü¶ï" onclick="selectIcon('ü¶ï')" title="Dinosaur">ü¶ï</button>
                                    <button type="button" class="icon-option" data-icon="üöÅ" onclick="selectIcon('üöÅ')" title="Helicopter">üöÅ</button>
                                    <button type="button" class="icon-option" data-icon="üèõÔ∏è" onclick="selectIcon('üèõÔ∏è')" title="Building">üèõÔ∏è</button>
                                    <button type="button" class="icon-option" data-icon="üóø" onclick="selectIcon('üóø')" title="Statue">üóø</button>
                                    
                                    <!-- Western & Historical -->
                                    <button type="button" class="icon-option" data-icon="ü§†" onclick="selectIcon('ü§†')" title="Cowboy">ü§†</button>
                                    <button type="button" class="icon-option" data-icon="üêé" onclick="selectIcon('üêé')" title="Horse">üêé</button>
                                    <button type="button" class="icon-option" data-icon="üî´" onclick="selectIcon('üî´')" title="Gun">üî´</button>
                                    <button type="button" class="icon-option" data-icon="üè∞" onclick="selectIcon('üè∞')" title="Castle">üè∞</button>
                                    <button type="button" class="icon-option" data-icon="‚öîÔ∏è" onclick="selectIcon('‚öîÔ∏è')" title="Sword">‚öîÔ∏è</button>
                                    <button type="button" class="icon-option" data-icon="üõ°Ô∏è" onclick="selectIcon('üõ°Ô∏è')" title="Shield">üõ°Ô∏è</button>
                                    <button type="button" class="icon-option" data-icon="üëë" onclick="selectIcon('üëë')" title="Crown">üëë</button>
                                    
                                    <!-- Sports & Action -->
                                    <button type="button" class="icon-option" data-icon="‚öΩ" onclick="selectIcon('‚öΩ')" title="Soccer">‚öΩ</button>
                                    <button type="button" class="icon-option" data-icon="üèÄ" onclick="selectIcon('üèÄ')" title="Basketball">üèÄ</button>
                                    <button type="button" class="icon-option" data-icon="üèà" onclick="selectIcon('üèà')" title="Football">üèà</button>
                                    <button type="button" class="icon-option" data-icon="üéæ" onclick="selectIcon('üéæ')" title="Tennis">üéæ</button>
                                    <button type="button" class="icon-option" data-icon="üèä‚Äç‚ôÇÔ∏è" onclick="selectIcon('üèä‚Äç‚ôÇÔ∏è')" title="Swimming">üèä‚Äç‚ôÇÔ∏è</button>
                                    <button type="button" class="icon-option" data-icon="üö¥‚Äç‚ôÇÔ∏è" onclick="selectIcon('üö¥‚Äç‚ôÇÔ∏è')" title="Cycling">üö¥‚Äç‚ôÇÔ∏è</button>
                                    <button type="button" class="icon-option" data-icon="üèÉ‚Äç‚ôÇÔ∏è" onclick="selectIcon('üèÉ‚Äç‚ôÇÔ∏è')" title="Running">üèÉ‚Äç‚ôÇÔ∏è</button>
                                    
                                    <!-- Food & Cooking -->
                                    <button type="button" class="icon-option" data-icon="üçï" onclick="selectIcon('üçï')" title="Pizza">üçï</button>
                                    <button type="button" class="icon-option" data-icon="üçî" onclick="selectIcon('üçî')" title="Burger">üçî</button>
                                    <button type="button" class="icon-option" data-icon="üçú" onclick="selectIcon('üçú')" title="Noodles">üçú</button>
                                    <button type="button" class="icon-option" data-icon="üç∞" onclick="selectIcon('üç∞')" title="Cake">üç∞</button>
                                    <button type="button" class="icon-option" data-icon="‚òï" onclick="selectIcon('‚òï')" title="Coffee">‚òï</button>
                                    <button type="button" class="icon-option" data-icon="üç∑" onclick="selectIcon('üç∑')" title="Wine">üç∑</button>
                                    <button type="button" class="icon-option" data-icon="üç∫" onclick="selectIcon('üç∫')" title="Beer">üç∫</button>
                                    
                                    <!-- Travel & Adventure -->
                                    <button type="button" class="icon-option" data-icon="‚úàÔ∏è" onclick="selectIcon('‚úàÔ∏è')" title="Airplane">‚úàÔ∏è</button>
                                    <button type="button" class="icon-option" data-icon="üö¢" onclick="selectIcon('üö¢')" title="Ship">üö¢</button>
                                    <button type="button" class="icon-option" data-icon="üöÇ" onclick="selectIcon('üöÇ')" title="Train">üöÇ</button>
                                    <button type="button" class="icon-option" data-icon="üèñÔ∏è" onclick="selectIcon('üèñÔ∏è')" title="Beach">üèñÔ∏è</button>
                                    <button type="button" class="icon-option" data-icon="üóΩ" onclick="selectIcon('üóΩ')" title="Statue of Liberty">üóΩ</button>
                                    <button type="button" class="icon-option" data-icon="üóº" onclick="selectIcon('üóº')" title="Tokyo Tower">üóº</button>
                                    <button type="button" class="icon-option" data-icon="üè∞" onclick="selectIcon('üè∞')" title="Castle">üè∞</button>
                                    
                                    <!-- Music & Performance -->
                                    <button type="button" class="icon-option" data-icon="üé∏" onclick="selectIcon('üé∏')" title="Guitar">üé∏</button>
                                    <button type="button" class="icon-option" data-icon="üéπ" onclick="selectIcon('üéπ')" title="Piano">üéπ</button>
                                    <button type="button" class="icon-option" data-icon="ü•Å" onclick="selectIcon('ü•Å')" title="Drum">ü•Å</button>
                                    <button type="button" class="icon-option" data-icon="üé∫" onclick="selectIcon('üé∫')" title="Trumpet">üé∫</button>
                                    <button type="button" class="icon-option" data-icon="üéª" onclick="selectIcon('üéª')" title="Violin">üéª</button>
                                    <button type="button" class="icon-option" data-icon="üé§" onclick="selectIcon('üé§')" title="Microphone">üé§</button>
                                    <button type="button" class="icon-option" data-icon="üéß" onclick="selectIcon('üéß')" title="Headphones">üéß</button>
                                    
                                    <!-- Nature & Outdoors -->
                                    <button type="button" class="icon-option" data-icon="üå≤" onclick="selectIcon('üå≤')" title="Tree">üå≤</button>
                                    <button type="button" class="icon-option" data-icon="üåä" onclick="selectIcon('üåä')" title="Wave">üåä</button>
                                    <button type="button" class="icon-option" data-icon="üåÖ" onclick="selectIcon('üåÖ')" title="Sunrise">üåÖ</button>
                                    <button type="button" class="icon-option" data-icon="üåå" onclick="selectIcon('üåå')" title="Galaxy">üåå</button>
                                    <button type="button" class="icon-option" data-icon="üå∏" onclick="selectIcon('üå∏')" title="Flower">üå∏</button>
                                    <button type="button" class="icon-option" data-icon="üçÉ" onclick="selectIcon('üçÉ')" title="Leaf">üçÉ</button>
                                    <button type="button" class="icon-option" data-icon="‚ùÑÔ∏è" onclick="selectIcon('‚ùÑÔ∏è')" title="Snow">‚ùÑÔ∏è</button>
                                </div>
                            </div>
                            <div class="input-hint">Choose an icon that represents your list's theme</div>
                        </div>
                        
                        <div class="form-group">
                            <label>Choose a Color</label>
                            <div class="color-selector">
                                <button type="button" class="color-option selected" data-color="#007AFF" onclick="selectColor('#007AFF')" style="background-color: #007AFF;" title="Blue"></button>
                                <button type="button" class="color-option" data-color="#FF3B30" onclick="selectColor('#FF3B30')" style="background-color: #FF3B30;" title="Red"></button>
                                <button type="button" class="color-option" data-color="#34C759" onclick="selectColor('#34C759')" style="background-color: #34C759;" title="Green"></button>
                                <button type="button" class="color-option" data-color="#FF9500" onclick="selectColor('#FF9500')" style="background-color: #FF9500;" title="Orange"></button>
                                <button type="button" class="color-option" data-color="#AF52DE" onclick="selectColor('#AF52DE')" style="background-color: #AF52DE;" title="Purple"></button>
                                <button type="button" class="color-option" data-color="#FF2D92" onclick="selectColor('#FF2D92')" style="background-color: #FF2D92;" title="Pink"></button>
                                <button type="button" class="color-option" data-color="#5AC8FA" onclick="selectColor('#5AC8FA')" style="background-color: #5AC8FA;" title="Light Blue"></button>
                                <button type="button" class="color-option" data-color="#FFCC02" onclick="selectColor('#FFCC02')" style="background-color: #FFCC02;" title="Yellow"></button>
                            </div>
                            <div class="input-hint">Color for the list chip in the selector</div>
                        </div>
                        
                        <div class="form-group">
                            <label>Choose a Background Color</label>
                            <div class="color-selector">
                                <button type="button" class="bg-color-option selected" data-bg-color="#1a1a2e" onclick="selectBackgroundColor('#1a1a2e', event)" style="background-color: #1a1a2e;" title="Dark Blue"></button>
                                <button type="button" class="bg-color-option" data-bg-color="#2d1b69" onclick="selectBackgroundColor('#2d1b69', event)" style="background-color: #2d1b69;" title="Purple"></button>
                                <button type="button" class="bg-color-option" data-bg-color="#1b4d3e" onclick="selectBackgroundColor('#1b4d3e', event)" style="background-color: #1b4d3e;" title="Dark Green"></button>
                                <button type="button" class="bg-color-option" data-bg-color="#4d1b1b" onclick="selectBackgroundColor('#4d1b1b', event)" style="background-color: #4d1b1b;" title="Dark Red"></button>
                                <button type="button" class="bg-color-option" data-bg-color="#1b3b4d" onclick="selectBackgroundColor('#1b3b4d', event)" style="background-color: #1b3b4d;" title="Dark Blue"></button>
                                <button type="button" class="bg-color-option" data-bg-color="#4d3b1b" onclick="selectBackgroundColor('#4d3b1b', event)" style="background-color: #4d3b1b;" title="Dark Brown"></button>
                                <button type="button" class="bg-color-option" data-bg-color="#3b1b4d" onclick="selectBackgroundColor('#3b1b4d', event)" style="background-color: #3b1b4d;" title="Dark Purple"></button>
                                <button type="button" class="bg-color-option" data-bg-color="#1b4d3b" onclick="selectBackgroundColor('#1b4d3b', event)" style="background-color: #1b4d3b;" title="Dark Teal"></button>
                            </div>
                            <div class="input-hint">Background color when viewing this list (darker colors recommended)</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeCreateListModal()">Cancel</button>
                <button class="btn btn-primary" onclick="createNewList()">Create List</button>
            </div>
        </div>
    </div>

    <!-- List Management Overlay -->
    <div id="listManagementOverlay" class="modal-overlay" style="display: none;">
        <div class="modal list-management-modal">
            <div class="modal-header">
                <h3>üìã Manage Your Lists</h3>
                <p class="modal-subtitle">Organize, edit, and share your watchlists</p>
            </div>
            <div class="modal-body">
                <div class="list-management-tabs">
                    <button class="tab-button active" onclick="switchListTab('all')">All Lists</button>
                    <button class="tab-button" onclick="switchListTab('shared')">Shared</button>
                    <button class="tab-button" onclick="switchListTab('settings')">Settings</button>
                </div>
                
                <div id="allListsTab" class="tab-content active">
                    <div class="lists-grid" id="listsGrid">
                        <!-- Lists will be populated here -->
                    </div>
                </div>
                
                <div id="sharedListsTab" class="tab-content">
                    <div class="shared-lists-info">
                        <p>Lists shared with you will appear here.</p>
                        <p>You can view and interact with shared lists based on permissions.</p>
                    </div>
                </div>
                
                <div id="settingsTab" class="tab-content">
                    <div class="list-settings">
                        <h4>List Management Preferences</h4>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="autoSyncLists" checked>
                                Automatically sync list changes
                            </label>
                        </div>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="showListCounts" checked>
                                Show item counts on list chips
                            </label>
                        </div>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="rememberListSelection" checked>
                                Remember last selected lists
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeListManagementOverlay()">Close</button>
            </div>
        </div>
    </div>

    <!-- Edit List Modal -->
    <div id="editListModal" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3>‚úèÔ∏è Edit List</h3>
                <p class="modal-subtitle">Update your list's properties</p>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="editListNameInput">List Name</label>
                    <input type="text" id="editListNameInput" placeholder="Enter list name" maxlength="50" required>
                </div>
                
                <div class="form-group">
                    <label for="editListDescriptionInput">Description</label>
                    <textarea id="editListDescriptionInput" placeholder="Enter list description" rows="3" maxlength="200"></textarea>
                </div>
                
                <div class="form-group">
                    <label>Icon</label>
                    <div class="icon-selector" id="editIconSelector">
                        <!-- Icons will be populated here -->
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Color</label>
                    <div class="color-selector" id="editColorSelector">
                        <!-- Colors will be populated here -->
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeEditListModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveListChanges()">Save Changes</button>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html> 